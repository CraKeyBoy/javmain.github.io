{"meta":{"title":"Javmain's Blog","subtitle":null,"description":null,"author":"javmain","url":"https://blog.51itzone.cn"},"pages":[{"title":"å…³äºæˆ‘","date":"2018-08-20T02:11:16.650Z","updated":"2018-08-20T02:11:16.650Z","comments":true,"path":"about/index.html","permalink":"https://blog.51itzone.cn/about/index.html","excerpt":"","text":"å†™åœ¨å¼€å¤´æˆ‘ä»¬éœ€è¦è®°å½•æ—¶é—´å¸¦ç»™æˆ‘ä»¬çš„è®°å¿†ã€‚ è‡ªç”±ï¼Œå¼€æ”¾ï¼Œåˆ›æ–°ï¼ŒåŒ…å®¹ã€‚ æˆé•¿æ€»æ˜¯ä¼´éšç€çœ‹æ¸…è‡ªå·±ï¼Œè€Œæ‰€è°“ä¸€ç”Ÿï¼Œæˆ–è®¸åªæœ‰ç”Ÿä¸æ´»ã€‚çŒ®ç»™ä¸€è·¯èµ°æ¥çš„è‡ªå·±ã€‚ ç®€ä»‹ä¸€æšåŒ—æ¼‚çš„â€œæ”»åŸç‹®â€ï¼Œæ€€ç€ç”¨ä»£ç æ”¹å˜ä¸–ç•Œçš„æ¢¦æƒ³ï¼Œè·µè¡Œç€æå®¢çš„ç²¾ç¥ã€‚ å¸¸ç”¨è¯­è¨€Java â˜…â˜…â˜…â˜…â˜…Python â˜…â˜…â˜…â˜…â˜†C++ â˜…â˜…â˜…â˜†â˜† æ¡†æ¶/å·¥å…·Spring boot â˜…â˜…â˜…â˜…â˜…Spring cloud\\Dubbo â˜…â˜…â˜…â˜…â˜†Flume\\Kafka\\Elastic â˜…â˜…â˜…â˜…â˜†Docker\\MySQl\\Redis\\MongoDB\\Neo4j â˜…â˜…â˜…â˜…â˜†Hadoop\\Hive\\Storm\\HDFS â˜…â˜…â˜…â˜†â˜† ç›®å‰ä¸“æ³¨äºå¤§æ•°æ®ã€æ¨èç³»ç»Ÿã€çŸ¥è¯†å›¾è°±ã€é‡åŒ–äº¤æ˜“ã€MLã€DL è”ç³»æ–¹å¼é‚®ç®±: yinyuxinqing#126#com"},{"title":"","date":"2018-08-20T02:11:16.650Z","updated":"2018-08-20T02:11:16.650Z","comments":true,"path":"books/index.html","permalink":"https://blog.51itzone.cn/books/index.html","excerpt":"","text":""},{"title":"Categories","date":"2018-08-20T02:11:16.651Z","updated":"2018-08-20T02:11:16.651Z","comments":true,"path":"categories/index.html","permalink":"https://blog.51itzone.cn/categories/index.html","excerpt":"","text":""},{"title":"Tags","date":"2018-08-20T02:11:16.666Z","updated":"2018-08-20T02:11:16.666Z","comments":true,"path":"tags/index.html","permalink":"https://blog.51itzone.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"python è™šæ‹Ÿç¯å¢ƒç®¡ç† pipenv ä½¿ç”¨","slug":"python-pipenv-how-use","date":"2018-05-08T02:43:22.000Z","updated":"2018-08-20T02:11:16.648Z","comments":true,"path":"2018/05/08/python-pipenv-how-use/","link":"","permalink":"https://blog.51itzone.cn/2018/05/08/python-pipenv-how-use/","excerpt":"pipenv æ˜¯ 2017 å¹´ 1 æœˆç”± Kennethreitz å¤§ç¥åˆ›ä½œï¼Œç›®å‰å·²ç»æœ‰ 286 ä¸ªç‰ˆæœ¬å‘å¸ƒï¼Œå¯è§åœ¨ GitHub ä¸Šæ˜¯éå¸¸æ´»è·ƒçš„é¡¹ç›®ã€‚ç®€å•æ¥è¯´ pipenv çš„æ˜¯ç®¡ç† python ç¯å¢ƒå’Œ python ä¾èµ–åŒ…çš„å·¥å…·ã€‚ä½¿ç”¨æ—¶ pipenv ä¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ä¸”æ–°å¢äº† Pipfile æ–‡ä»¶æ¥ç»´æŠ¤åŒ…ä¾èµ–ï¼Œ æ–°å¢ Pipfile.lock å·²åœ¨ç¡®å®šç¯å¢ƒå’Œä¾èµ–åé”å®šé¡¹ç›®ï¼Œä»¥ä¾¿æœ€ç»ˆç‰ˆæœ¬å‘å¸ƒã€‚ pipenv è¿˜æ˜¯ Python.org æ­£å¼æ¨èçš„ python åŒ…ç®¡ç†å·¥å…·ã€‚å¼•ç”¨å®˜æ–¹è¯´æ˜ï¼š Pipenv â€” the officially recommended Python packaging tool from Python.org, free (as in freedom).","text":"pipenv æ˜¯ 2017 å¹´ 1 æœˆç”± Kennethreitz å¤§ç¥åˆ›ä½œï¼Œç›®å‰å·²ç»æœ‰ 286 ä¸ªç‰ˆæœ¬å‘å¸ƒï¼Œå¯è§åœ¨ GitHub ä¸Šæ˜¯éå¸¸æ´»è·ƒçš„é¡¹ç›®ã€‚ç®€å•æ¥è¯´ pipenv çš„æ˜¯ç®¡ç† python ç¯å¢ƒå’Œ python ä¾èµ–åŒ…çš„å·¥å…·ã€‚ä½¿ç”¨æ—¶ pipenv ä¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ä¸”æ–°å¢äº† Pipfile æ–‡ä»¶æ¥ç»´æŠ¤åŒ…ä¾èµ–ï¼Œ æ–°å¢ Pipfile.lock å·²åœ¨ç¡®å®šç¯å¢ƒå’Œä¾èµ–åé”å®šé¡¹ç›®ï¼Œä»¥ä¾¿æœ€ç»ˆç‰ˆæœ¬å‘å¸ƒã€‚ pipenv è¿˜æ˜¯ Python.org æ­£å¼æ¨èçš„ python åŒ…ç®¡ç†å·¥å…·ã€‚å¼•ç”¨å®˜æ–¹è¯´æ˜ï¼š Pipenv â€” the officially recommended Python packaging tool from Python.org, free (as in freedom). pipevn å¯ä»¥è§£å†³é‚£äº›é—®é¢˜ ä½¿ç”¨ pipevn å°±ç›¸å½“äºåŒæ—¶ä½¿ç”¨äº† pip å’Œ virtualenv ï¼Œå³åšåˆ°åŒ…ç®¡ç†åˆå¯ä»¥ç®¡ç†è™šæ‹Ÿç¯å¢ƒã€‚ ä½¿ç”¨ pipevn è§£å†³ requirement.txt é¢ä¸´çš„é—®é¢˜ pipenv ä½¿ç”¨ Pipfile ä»£æ›¿ requirement.txt æ–‡ä»¶æ¥è®°å½•é¡¹ç›®ä¾èµ–åŒ…ã€‚ æ–°å¢äº† Pipfile.lock æ–‡ä»¶æ¥é”å®š python è½¯ä»¶çš„åŒ…ååŠç‰ˆæœ¬ï¼Œä»¥åŠå…¶ä¾èµ–å…³ç³»çš„åˆ—è¡¨ã€‚ å®ƒå‚è€ƒäº†å…¶ä»–è¯­è¨€çš„åŒ…ç®¡ç†å·¥å…·ï¼ˆbundler, composer, npm, cargo, yarn, etc.ï¼‰ï¼Œæ—¨åœ¨å°†æœ€å¥½çš„åŒ…ç®¡ç†å·¥å…·å¸¦å…¥ python ä¸–ç•Œã€‚ å‡†å¤‡å·¥ä½œMacä½¿ç”¨ Homebrew å®‰è£…: 1brew install pipenv Ubuntu17.101234sudo apt install software-properties-common python-software-propertiessudo add-apt-repository ppa:pypa/ppasudo apt updatesudo apt install pipenv ä½¿ç”¨ pip å®‰è£…ä½œè€…æ¨èåœ¨ python3 ä¸‹è¾¹å®‰è£…ï¼Œä¼šæé«˜ä¸ virtualenv çš„å…¼å®¹æ€§ã€‚ 1pip install pipenv ä¸ºé˜²æ­¢å’Œç³»ç»Ÿpythonåº“äº§ç”Ÿå½±å“ï¼Œå¯ä½¿ç”¨æ­¤ç§æ–¹æ¡ˆå®‰è£…ã€‚ 1pip install --user pipenv pip é»˜è®¤å®‰è£…åŒ…è·¯å¾„ä¸º /usr/local/lib/python2.7/site-packages ã€‚æ­¤æ¨¡å¼ä¸‹ï¼Œpip å®‰è£…åŒ…ä¿å­˜è·¯å¾„ä¸ºç”¨æˆ·åº“è·¯å¾„,å¯ä½¿ç”¨å‘½ä»¤ python3 -m site â€“user-site å…·ä½“æŸ¥çœ‹ã€‚ 12$ python3 -m site --user-site/Users/apple/Library/Python/3.6/lib/python/site-packages å¦‚æœåœ¨å®‰è£…åä½ çš„ shell ä¸­ pipenv ä¸å¯ç”¨ï¼Œä½ éœ€è¦æŠŠç”¨æˆ·åº“çš„äºŒè¿›åˆ¶ç›®å½• /Users/apple/Library/Python/3.6/bin æ·»åŠ åˆ°ä½ çš„ PATH ä¸­ã€‚ åŸºæœ¬ä½¿ç”¨pipenv è™šæ‹Ÿç¯å¢ƒä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192# åˆ›å»ºå®ä¾‹é¡¹ç›®$ mkdir PipenvDemo$ cd PipenvDemo$ touch helloworld.py$ vim helloworld.pyprint(\"hello world\")$ python3 helloworld.pyhello world# ä½¿ç”¨ python3 åˆ›å»º pipenv è™šæ‹Ÿç¯å¢ƒ$ pipenv install --threeCreating a Pipfile for this projectâ€¦ # è‡ªåŠ¨åˆ›å»º PipfilePipfile.lock not found, creatingâ€¦ # è‡ªåŠ¨åˆ›å»º Pipfile.lockLocking [dev-packages] dependenciesâ€¦Locking [packages] dependenciesâ€¦Updated Pipfile.lock (ca72e7)!Installing dependencies from Pipfile.lock (ca72e7)â€¦ ğŸ â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 0/0 â€” 00:00:00To activate this project's virtualenv, run the following: $ pipenv shell# æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒä½ç½®$ pipenv --venv/Users/apple/.local/share/virtualenvs/PipenvDemo-jMTXT_BG# æŸ¥çœ‹ python è§£æå™¨ä½ç½®$ pipenv --py/Users/apple/.local/share/virtualenvs/PipenvDemo-jMTXT_BG/bin/python# è¿è¡Œ$ pipenv run python helloworld.pyhello world# ä½¿ç”¨ pipenv åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒè¿è¡Œ$ pipenv shellSpawning environment shell (/bin/zsh). Use 'exit' to leave.. /Users/apple/.local/share/virtualenvs/PipenvDemo-jMTXT_BG/bin/activate# æŸ¥è¯¢å½“å‰ç¯å¢ƒ python çš„ä½ç½®$ which python/Users/apple/.local/share/virtualenvs/PipenvDemo-jMTXT_BG/bin/python# æŸ¥çœ‹å½“å‰ç¯å¢ƒ python çš„ç‰ˆæœ¬$ python -VPython 3.6.5# è¿è¡Œ python ç¨‹åºpython helloworld.py# å®‰è£…ä¾èµ–åŒ…$ pipenv install requestsInstalling requestsâ€¦Collecting requests...Successfully installed certifi-2018.4.16 chardet-3.0.4 idna-2.6 requests-2.18.4 urllib3-1.22Adding requests to Pipfile's [packages]â€¦Pipfile.lock (ca72e7) out of date, updating to (b14837)â€¦Locking [dev-packages] dependenciesâ€¦Locking [packages] dependenciesâ€¦Updated Pipfile.lock (b14837)!... # æŸ¥çœ‹å®‰è£…åŒ…ä¾èµ– $ pipenv graphrequests==2.18.4 - certifi [required: &gt;=2017.4.17, installed: 2018.4.16] - chardet [required: &gt;=3.0.2,&lt;3.1.0, installed: 3.0.4] - idna [required: &gt;=2.5,&lt;2.7, installed: 2.6] - urllib3 [required: &lt;1.23,&gt;=1.21.1, installed: 1.22]# ä¾èµ–åŒ…åªå®‰è£…åœ¨å¼€å‘ç¯å¢ƒ$ pipenv install pytest --devInstalling pytest......Adding pytest to Pipfile's [dev-packages]...# æŸ¥çœ‹ Pipfile æ–‡ä»¶,å‘ç° pytest æ”¾åˆ°äº† dev-packages ä¸‹$ cat Pipfile[[source]]url = \"https://pypi.org/simple\"verify_ssl = truename = \"pypi\"[packages]requests = \"*\"[dev-packages]pytest = \"*\"[requires]python_version = \"3.6\" é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå·²ç»å¯ä»¥æŒæ¡å¤§éƒ¨åˆ†ä½¿ç”¨æ–¹æ³•ï¼Œæ›´å¤šå‘½ä»¤è¯¦ç»†å†…å®¹è¯»è€…å¯å‚è€ƒï¼šbasics é«˜çº§ä½¿ç”¨å‘½ä»¤è¡Œè‡ªåŠ¨å®Œæˆå¦‚æœä½ ä½¿ç”¨ bash æˆ–è€… zshï¼Œ ä½ å¯ä»¥åœ¨ ~/.bash_profile (~/.zshrc) ä¸­è®¾ç½®å¦‚ä¸‹å˜é‡ï¼Œä½¿ç”¨å‘½ä»¤æ—¶æŒ‰ tab é”®ä¼šè‡ªåŠ¨è¡¥å…¨å‘½ä»¤ï¼Œéå¸¸æ–¹ä¾¿ 1eval \"$(pipenv --completion)\" ä½¿ç”¨ requirements.txt æ¥å®‰è£…åŒ…ä¾èµ–é€šè¿‡ requirements.txt å®‰è£…ï¼Œé‡ç”¨ requirements.txt æ¥æ„å»ºæ–°ç¯å¢ƒ 1pipenv install -r requirements.txt è‡ªåŠ¨å®‰è£… pythonå¦‚æœä½ ä¹‹å‰ä½¿ç”¨çš„æ˜¯ pyenv æ¥ç®¡ç† python çš„ç‰ˆæœ¬ï¼Œå½“ä½¿ç”¨ pipenv install çš„æ—¶å€™ pipenv ä¼šè‡ªåŠ¨æ£€æµ‹ python æ˜¯å¦å­˜åœ¨ï¼Œå¹¶è¯¢é—®ä½ æ˜¯å¦è¦å®‰è£…è¯¥ç‰ˆæœ¬çš„ python 12345678910111213141516171819202122232425262728$ cat Pipfile[[source]]url = \"https://pypi.python.org/simple\"verify_ssl = true[dev-packages][packages]requests = \"*\"[requires]python_version = \"3.6\"$ pipenv installWarning: Python 3.6 was not found on your systemâ€¦Would you like us to install latest CPython 3.6 with pyenv? [Y/n]: yInstalling CPython 3.6.2 with pyenv (this may take a few minutes)â€¦...Making Python installation globalâ€¦Creating a virtualenv for this projectâ€¦Using /Users/apple/.pyenv/shims/python3 to create virtualenvâ€¦...No package provided, installing all dependencies....Installing dependencies from Pipfile.lockâ€¦ğŸ â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 5/5 â€” 00:00:03To activate this project's virtualenv, run the following: $ pipenv shell ä¿®æ”¹é»˜è®¤ python ç‰ˆæœ¬Pipenv é»˜è®¤ä½¿ç”¨ python3 æ¥åˆå§‹åŒ–é¡¹ç›®ï¼Œä½ å¯ä»¥é€šè¿‡ ä½¿ç”¨ â€“three æˆ–è€… â€“two æ ‡è¯†æ¥æ”¹å˜åˆå§‹åŒ–ç¯å¢ƒçš„ python ç‰ˆæœ¬ã€‚ä¹Ÿå¯ä»¥æŒ‡å®š PIPENV_DEFAULT_PYTHON_VERSION å€¼æ¥æŒ‡å®š python ç‰ˆæœ¬ã€‚ è‡ªåŠ¨åŠ è½½ .env æ–‡ä»¶å¦‚æœåœ¨ä½ çš„é¡¹ç›®ä¸­åŒ…å« .env æ–‡ä»¶ï¼Œä½¿ç”¨ $ pipenv shell å’Œ $ pipenv run å°†ä¼šè‡ªåŠ¨åŠ è½½è¯¥æ–‡ä»¶ã€‚å¦‚æœä½ çš„ .env æ–‡ä»¶æ²¡æœ‰åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæˆ–è€…ä¸å« .env ,ä½ å¯ä»¥ä½¿ç”¨å¦‚æœå‘½ä»¤æŒ‡å®šæ–‡ä»¶ä½ç½®æˆ–åç§° 1PIPENV_DOTENV_LOCATION=/path/to/.env pipenv shell é˜»æ­¢ pipenv è‡ªåŠ¨åŠ è½½ .env æ–‡ä»¶ 1PIPENV_DONT_LOAD_ENV=1 pipenv shell æ›´å¤šé«˜çº§å‘½ä»¤åŠä½¿ç”¨è¯¦ç»†å†…å®¹å¯å‚è€ƒï¼šadvanced ç»“åˆ vs code ä½¿ç”¨vs code å·²ç»æ”¯æŒ pipenv çš„ä½¿ç”¨ï¼Œå®˜æ–¹è¯´æ˜ï¼š A pipenv environment for the workplace folder. If one is found then no other interpreters are searched for or listed as pipenv expects to manage all aspects of the environment. å¤§æ„æ˜¯ï¼šé¡¹ç›®å¦‚æœä½¿ç”¨ pipenv ç¯å¢ƒï¼Œä¸€æ—¦å‘ç°ä½¿ç”¨äº† pipenv ï¼Œåˆ™åªåˆ—å‡ºæ­¤é¡¹ç›®çš„ interpreter ï¼Œä¸ä¼šåœ¨æœç´¢å…¶ä»–çš„ python è§£æå™¨ï¼Œå› ä¸º pipenv å¯ä»¥ç®¡ç†ç¯å¢ƒçš„å„ä¸ªæ–¹é¢ã€‚ ä½¿ç”¨ vs code ä½œä¸ºå¼€å‘å·¥å…·ï¼Œæ‰“å¼€å·²ç»ç”Ÿæˆ Pipfile æ–‡ä»¶çš„é¡¹ç›®ï¼Œåœ¨é€‰æ‹© python interperter (â‡§âŒ˜P) æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯æç¤ºï¼š 12Workspace contains pipfile but attempt to run pipenv --venv failed with Traceback (most recent call last):File /usr/local/Cellar/pipenv/11.10.3/libexec/bin/pipenv, line 11, in &lt;module&gt; load_entry_point(pipenv==11.10.3, console_scripts, pipenv)() File /usr/local/Cellar/pipenv/11.10.3/libexec/lib/python3.6/site-packages/pipenv/vendor/click/core.py, line 722, in __call__ return self.main(*args, **kwargs) File /usr/local/Cellar/pipenv/11.10.3/libexec/lib/python3.6/site-packages/pipenv/vendor/click/core.py, line 676, in main _verify_python3_env() File /usr/local/Cellar/pipenv/11.10.3/libexec/lib/python3.6/site-packages/pipenv/vendor/click/_unicodefun.py, line 118, in _verify_python3_env for mitigation steps. + extra) RuntimeError: Click will abort further execution because Python 3 was configured to use ASCII as encoding for the environment. Consult http://click.pocoo.org/python3/for mitigation steps. This system lists a couple of UTF-8 supporting locales that you can pick from. The following suitable locales where discovered: af_ZA.UTF-8, am_ET.UTF-8, be_BY.UTF-8, bg_BG.UTF-8, ca_ES.UTF-8, cs_CZ.UTF-8, da_DK.UTF-8, de_AT.UTF-8, de_CH.UTF-8, de_DE.UTF-8, el_GR.UTF-8, en_AU.UTF-8, en_CA.UTF-8, en_GB.UTF-8, en_IE.UTF-8, en_NZ.UTF-8, en_US.UTF-8, es_ES.UTF-8, et_EE.UTF-8, eu_ES.UTF-8, fi_FI.UTF-8, fr_BE.UTF-8, fr_CA.UTF-8, fr_CH.UTF-8, fr_FR.UTF-8, he_IL.UTF-8, hr_HR.UTF-8, hu_HU.UTF-8, hy_AM.UTF-8, is_IS.UTF-8, it_CH.UTF-8, it_IT.UTF-8, ja_JP.UTF-8, kk_KZ.UTF-8, ko_KR.UTF-8, lt_LT.UTF-8, nl_BE.UTF-8, nl_NL.UTF-8, no_NO.UTF-8, pl_PL.UTF-8, pt_BR.UTF-8, pt_PT.UTF-8, ro_RO.UTF-8, ru_RU.UTF-8, sk_SK.UTF-8, sl_SI.UTF-8, sr_YU.UTF-8, sv_SE.UTF-8, tr_TR.UTF-8, uk_UA.UTF-8, zh_CN.UTF-8, zh_HK.UTF-8, zh_TW.UTF-8. Make sure pipenv is on the PATH. è§£å†³æ–¹æ³•ï¼šå¦‚æœæ˜¯ç®€ä½“ä¸­æ–‡ç¯å¢ƒï¼Œåˆ™åœ¨ ~/.bash_profile (~/.zshrc) ä¸­è®¾ç½®å¦‚ä¸‹å˜é‡ï¼š 12export LC_ALL=zh_CN.UTF-8export LANG=zh_CN.UTF-8 è‹±æ–‡ç¯å¢ƒï¼Œè®¾ç½®ï¼š 12export LC_ALL=en_US.UTF-8export LANG=en_US.UTF-8 ç„¶åæ‰§è¡Œ 1source .bash_profile(.zshrc) ï¼ˆä¸æ¨èï¼‰å¦‚æœä»»ç„¶æŠ¥é”™ï¼Œåˆ™å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»º .env æ–‡ä»¶ï¼Œå¹¶æ‹·è´ä¸Šæ–‡ä¸­çš„ shell è„šæœ¬ã€‚ æ€»ç»“ pipenv ä¸»è¦æ˜¯ç”¨æ¥è§£å†³ python ç‰ˆæœ¬å’ŒåŒ…ä¾èµ–çš„ç®¡ç† ç†Ÿæ‚‰äº† pipenv å®‰è£…å’Œè™šæ‹Ÿç¯å¢ƒçš„æ­å»º é€šè¿‡ç¤ºä¾‹æ¥å­¦ä¹  pipenv çš„åŸºæœ¬å‘½ä»¤ä½¿ç”¨ é€šè¿‡å­¦ä¹ é«˜çº§å‘½ä»¤æ¥ä½¿é¡¹ç›®å…·æœ‰å·¥ç¨‹ä¸Šçš„å¯ç”¨ äº†è§£ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³• å‚è€ƒèµ„æ–™ pipenv docpipenv githubpipenv è¯•ç”¨è¿‡ç¨‹åˆ†äº«","categories":[{"name":"Technology","slug":"Technology","permalink":"https://blog.51itzone.cn/categories/Technology/"},{"name":"python","slug":"Technology/python","permalink":"https://blog.51itzone.cn/categories/Technology/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.51itzone.cn/tags/python/"},{"name":"pipenv","slug":"pipenv","permalink":"https://blog.51itzone.cn/tags/pipenv/"}]},{"title":"è¯¦è§£redisåŠUbuntuçš„å®‰è£…å’Œè¿è¡Œ","slug":"redis-info-install-start-stop","date":"2017-10-21T06:10:25.000Z","updated":"2018-08-20T02:11:16.649Z","comments":true,"path":"2017/10/21/redis-info-install-start-stop/","link":"","permalink":"https://blog.51itzone.cn/2017/10/21/redis-info-install-start-stop/","excerpt":"å†™ä½œç›®çš„ äº†è§£redisçš„åŠŸèƒ½å’Œç‰¹ç‚¹ è®°å½•å®‰è£…æ–¹æ³•å’Œæ­¥éª¤ï¼Œæ–¹ä¾¿å¤æŸ¥ ç¯å¢ƒï¼šubuntu 16.04 LTS redis-4.0.2 æ¯ä¸ªçŸ¥è¯†ç‚¹èƒŒåéƒ½æœ‰å…¶åŸå› ï¼Œæ·±ç©¶æ‰ä¼šæŒæ¡çŸ¥è¯†çš„æœ¬çœŸ","text":"å†™ä½œç›®çš„ äº†è§£redisçš„åŠŸèƒ½å’Œç‰¹ç‚¹ è®°å½•å®‰è£…æ–¹æ³•å’Œæ­¥éª¤ï¼Œæ–¹ä¾¿å¤æŸ¥ ç¯å¢ƒï¼šubuntu 16.04 LTS redis-4.0.2 æ¯ä¸ªçŸ¥è¯†ç‚¹èƒŒåéƒ½æœ‰å…¶åŸå› ï¼Œæ·±ç©¶æ‰ä¼šæŒæ¡çŸ¥è¯†çš„æœ¬çœŸ ç®€ä»‹Redisç”±Salvatore Sanfilippoå¼€å‘äº2009å¹´ï¼Œåˆ°ä»Šå¹´9æœˆ21å·å·²ç»å‘å¸ƒäº†197ä¸ªreleaseç‰ˆæœ¬ï¼Œç›®å‰æœ€æ–°ç¨³å®šç‰ˆæ˜¯4.0.2ã€‚Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSICè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€çµæ´»çš„ã€å¼€æºçš„ã€key-valueå­˜å‚¨ç³»ç»Ÿã€‚å®ƒå…è®¸ç”¨æˆ·å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰å…³ç³»æ•°æ®åº“çš„é™åˆ¶ã€‚Rediså’ŒMemcachedç±»ä¼¼ï¼Œä½†æ˜¯è§£å†³äº†æ–­ç”µåæ•°æ®å®Œå…¨ä¸¢å¤±çš„æƒ…å†µ(ç”±äºredisæ˜¯å¼‚æ­¥å¤åˆ¶ï¼Œå› æ­¤ä¸ä¿è¯æ•°æ®å®Œå…¨ä¸ä¸¢å¤±ï¼Œåªæ˜¯è§£å†³äº†ä¸ä¸¢å¤±çš„å¯èƒ½æ€§ï¼‰ï¼Œè€Œä¸”å®ƒæ”¯æŒæ›´å¤šå…ƒåŒ–çš„valueç±»å‹ï¼Œè€Œä¸”æ€§èƒ½ç›¸å¯¹é«˜æ•ˆã€‚åŒæ—¶å®ƒä¹Ÿæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€è°ƒç”¨ï¼šActionScript, C, C++, C#, Chicken Scheme, Clojure, Common Lisp, D, Dart, Erlang, Go, Haskell, Haxe, Io, Java, JavaScript (Node.js), Julia, Lua, Objective-C, OCaml, Perl, PHP, Pure Data, Python, R[16], Racket, Ruby, Rust, Scala, Smalltalk and Tclï¼Œå¹¶ä¸”é€šè¿‡Redis Sentinelæä¾›é«˜å¯ç”¨ï¼Œé€šè¿‡Redis Clusteræä¾›è‡ªåŠ¨åˆ†ç‰‡ã€‚ Redisè¿˜æ”¯æŒä¸»ä»å¼‚æ­¥å¤åˆ¶ï¼Œéå¸¸å¿«çš„éé˜»å¡åˆæ¬¡åŒæ­¥ã€ç½‘ç»œæ–­å¼€æ—¶è‡ªåŠ¨é‡è¿å±€éƒ¨é‡åŒæ­¥ã€‚å…¶ä»–ç‰¹æ€§åŒ…æ‹¬ï¼š äº‹åŠ¡ è®¢é˜…/å‘å¸ƒ Luaè„šæœ¬ å¸¦TTLçš„é”® LRUå›æ”¶å¥ è‡ªåŠ¨æ•…éšœè½¬ç§»(failover) 1ã€æ•°æ®æ¨¡å‹ä½œä¸ºKey-valueå‹æ•°æ®åº“ï¼ŒRedisä¹Ÿæä¾›äº†é”®ï¼ˆKeyï¼‰å’Œé”®å€¼ï¼ˆValueï¼‰çš„æ˜ å°„å…³ç³»ã€‚ä½†æ˜¯ï¼Œé™¤äº†å¸¸è§„çš„æ•°å€¼æˆ–å­—ç¬¦ä¸²ï¼ŒRedisçš„é”®å€¼è¿˜å¯ä»¥æ˜¯ä»¥ä¸‹å½¢å¼ï¼š==Lists, Sets, Sorted Sets, Hashes, HyperLogLogs,Bitmaps,Geospatial data(åœ°ç†ç©ºé—´æ•°æ® since Redis 3.2)==ã€‚é”®å€¼çš„æ•°æ®ç±»å‹å†³å®šäº†è¯¥é”®å€¼æ”¯æŒçš„æ“ä½œã€‚Redisæ”¯æŒè¯¸å¦‚åˆ—è¡¨ã€é›†åˆæˆ–æœ‰åºé›†åˆçš„äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰é«˜çº§åŸå­æ“ä½œï¼›åŒæ—¶ï¼Œå¦‚æœé”®å€¼çš„ç±»å‹æ˜¯æ™®é€šæ•°å­—ï¼ŒRedisåˆ™æä¾›è‡ªå¢ç­‰åŸå­æ“ä½œã€‚ 2ã€æŒä¹…åŒ–é€šå¸¸ï¼ŒRediså°†æ•°æ®å…¨éƒ¨å­˜å‚¨äºå†…å­˜ä¸­ï¼Œæˆ–è¢«é…ç½®ä¸ºä½¿ç”¨è™šæ‹Ÿå†…å­˜(since Redis 2.3)ï¼Œæ­¤åŠŸèƒ½å·²ç»è¢«å¼ƒç”¨ï¼Œæ¥ä¿å­˜åˆ°ç£ç›˜ä¸Šã€‚ç°åœ¨Rediså¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®ç°æ•°æ®æŒä¹…åŒ–: ä½¿ç”¨å¿«ç…§çš„æ–¹å¼ï¼Œå¼‚æ­¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¸æ–­å†™å…¥ç£ç›˜ï¼› ä½¿ç”¨AOF(append-only file)(since Redis 1.1)çš„æ–¹å¼ï¼Œç±»ä¼¼MySQLçš„æ—¥å¿—æ–¹å¼ï¼Œä»¥å¢é‡çš„æ–¹å¼è®°å½•æ¯æ¬¡æ›´æ–°çš„æ—¥å¿—ã€‚ å‰è€…æ€§èƒ½è¾ƒé«˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¼•èµ·ä¸€å®šç¨‹åº¦çš„æ•°æ®ä¸¢å¤±ï¼›åè€…ç›¸åã€‚é»˜è®¤æƒ…å†µä¸‹Redisæ¯2ç§’ä¼šå†™å…¥æ•°æ®åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œå½“ç„¶å¦‚æœéœ€è¦è¿™ä¸ªæ—¶é—´æ˜¯å¯é…ç½®çš„ã€‚å¦‚æœç³»ç»Ÿå®•æœºï¼Œé‚£ä¹ˆåªä¼šæœ‰å‡ ç§’çš„æ•°æ®ä¼šä¸¢å¤±ã€‚å¦‚æœå¯¹æ­¤æ„Ÿå…´è¶£ï¼Œå¯ä»¥é˜…è¯»ä½œè€…çš„åšæ–‡ Redis persistence demystifiedæˆ–è€…æ­¤æ–‡Rediså®˜æ–¹æ–‡æ¡£(13) â€”â€”æŒä¹…åŒ– 3ã€å¤åˆ¶Redisæ”¯æŒå°†æ•°æ®åŒæ­¥åˆ°å¤šå°ä»åº“ä¸Šï¼Œè¿™ç§ç‰¹æ€§å¯¹æé«˜è¯»å–æ€§èƒ½éå¸¸æœ‰ç›Šã€‚Replicationæ˜¯Redisæœ€é‡è¦çš„åŠŸèƒ½ï¼Œä½†ä¹Ÿæ˜¯å‘æœ€å¤šçš„åŠŸèƒ½ï¼Œæƒ³æŒæ¡å¥½ï¼Œéœ€è¦äº†è§£è¿™äº›å†…å®¹ã€‚ Redis é‡‡ç”¨å¼‚æ­¥å¤åˆ¶(since Redis 2.8)ã€‚ ä¸€ä¸ªä¸»æœåŠ¡å™¨å¯ä»¥æ‹¥æœ‰å¤šä¸ªä»æœåŠ¡å™¨ã€‚ ä»æœåŠ¡å™¨å¯ä»¥æ¥å—å…¶ä»–ä»æœåŠ¡å™¨çš„è¿æ¥ä¼šå½¢æˆ==å›¾çŠ¶ç»“æ„==ã€‚ Redis çš„å¤åˆ¶åœ¨ä¸»æœåŠ¡å™¨ä¸Šæ˜¯éé˜»å¡çš„ã€‚ Redis çš„å¤åˆ¶åœ¨ä»æœåŠ¡å™¨ä¸Šä¹Ÿæ˜¯éé˜»å¡çš„ã€‚ å¤åˆ¶å¯ä»¥ç”¨æ¥æ”¯æŒå¯ä¼¸ç¼©æ€§ï¼Œç”¨å¤šä¸ªä»æœåŠ¡å™¨å¤„ç†åªè¯»æŸ¥è¯¢(ä¾‹å¦‚ï¼Œç¹é‡çš„ SORT æ“ä½œå¯ä»¥åˆ†é…åˆ°ä»æœåŠ¡å™¨ä¸Š)ï¼Œä¹Ÿå¯ä»¥ä»…ä»…ä½œä¸ºæ•°æ®å†—ä½™ã€‚ 4 é«˜å¯ç”¨Redis Sentinel æ˜¯ Redis çš„å®˜æ–¹é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œæ˜¯è®¾è®¡ç”¨æ¥å¸®åŠ©ç®¡ç† Redis å®ä¾‹çš„ç³»ç»Ÿã€‚ç”¨äºå®Œæˆä¸‹é¢ 4 ä¸ªä»»åŠ¡ï¼š ç›‘æ§(Monitoring)ã€‚Sentinel ä¸æ–­æ£€æŸ¥ä½ çš„ä¸»ä»å®ä¾‹æ˜¯å¦è¿è½¬æ­£å¸¸ã€‚ é€šçŸ¥(Notification)ã€‚Sentinel å¯ä»¥é€šè¿‡ API æ¥é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ–è€…å…¶ä»–è®¡ç®—æœºç¨‹åºï¼Œè¢«ç›‘æ§çš„ Redis å®ä¾‹å‡ºäº†é—®é¢˜ã€‚ è‡ªåŠ¨æ•…éšœè½¬ç§»(Automatic failover)ã€‚å¦‚æœä¸€å°ä¸»æœåŠ¡å™¨è¿è¡Œä¸æ­£å¸¸ï¼ŒSentinelä¼šå¼€å§‹ä¸€ä¸ªæ•…éšœè½¬ç§»è¿‡ç¨‹ï¼Œå°†ä»æœåŠ¡å™¨æå‡ä¸ºä¸»æœåŠ¡å™¨ï¼Œé…ç½®å…¶ä»–çš„ä»æœåŠ¡å™¨ä½¿ç”¨æ–°çš„ä¸»æœåŠ¡å™¨ï¼Œä½¿ç”¨ Redis æœåŠ¡å™¨çš„åº”ç”¨ç¨‹åºåœ¨è¿æ¥æ—¶ä¼šæ”¶åˆ°æ–°çš„æœåŠ¡å™¨åœ°å€é€šçŸ¥ã€‚ é…ç½®æä¾›è€…(Configuration provider)ã€‚Sentinel å……å½“å®¢æˆ·ç«¯æœåŠ¡å‘ç°çš„æƒå¨æ¥æºï¼šå®¢æˆ·ç«¯è¿æ¥åˆ° Sentinel æ¥è¯¢é—®æŸä¸ªæœåŠ¡çš„å½“å‰ Redisä¸»æœåŠ¡å™¨çš„åœ°å€ã€‚å½“æ•…éšœè½¬ç§»å‘ç”Ÿæ—¶ï¼ŒSentinel ä¼šæŠ¥å‘Šæ–°åœ°å€ã€‚ 5 é›†ç¾¤æ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæˆä¸ºRedisèƒ½æŒç»­ä¸æ–­å‘å±•çš„åŠ¨åŠ›ï¼Œä¹Ÿæ˜¯èƒ½è¢«å¹¿æ³›ä½¿ç”¨çš„äº®ç‚¹ã€‚æˆ‘ä»¬çœ‹çœ‹redisé›†ç¾¤éƒ½èƒ½åšä»€ä¹ˆ Redis é›†ç¾¤æä¾›ä¸€ç§è¿è¡Œ Redis çš„æ–¹å¼ï¼Œæ•°æ®è¢«è‡ªåŠ¨çš„åˆ†ç‰‡åˆ°å¤šä¸ª Redis èŠ‚ç‚¹ã€‚ é›†ç¾¤ä¸æ”¯æŒå¤„ç†å¤šä¸ªé”®çš„å‘½ä»¤ï¼Œå› ä¸ºè¿™éœ€è¦åœ¨ Redis èŠ‚ç‚¹é—´ç§»åŠ¨æ•°æ®ï¼Œä½¿å¾— Redis é›†ç¾¤ä¸èƒ½æä¾›åƒ Redis å•ç‚¹é‚£æ ·çš„æ€§èƒ½ï¼Œåœ¨é«˜è´Ÿè½½ä¸‹ä¼šè¡¨ç°å¾—ä¸å¯é¢„çŸ¥ã€‚ Redis é›†ç¾¤ä¹Ÿæä¾›åœ¨ç½‘ç»œåˆ†å‰²ï¼ˆpartitionsï¼‰æœŸé—´çš„ä¸€å®šç¨‹åº¦çš„å¯ç”¨æ€§ï¼Œè¿™å°±æ˜¯åœ¨ç°å®ä¸­å½“ä¸€äº›èŠ‚ç‚¹å¤±è´¥æˆ–è€…ä¸èƒ½é€šä¿¡æ—¶èƒ½ç»§ç»­è¿›è¡Œè¿è½¬çš„èƒ½åŠ›ã€‚ å½“ç„¶ä¸Šæ–‡åªæ˜¯å¯¹ Redis åŠŸèƒ½çš„ä¸€ä¸ªæ¦‚è§ˆï¼Œå¦‚æœæƒ³æ·±å…¥å­¦ä¹ ï¼Œæ¯ä¸ªç‰¹æ€§éƒ½å¯ä»¥å†™ä¸€ç³»åˆ—æ–‡ç« ï¼Œæœ¬æ–‡å°±ä¸å†è¯¦ç»†å±•å¼€å™è¿°ã€‚ å®‰è£…åŠè¿è¡Œ redis1ã€æ£€æµ‹æ˜¯å¦æœ‰å®‰è£…redisä½¿ç”¨linuxå‘½ä»¤ whereis æŸ¥æ‰¾æ˜¯å¦å®‰è£… redis-cli å’Œ redis-server 12345ubuntu@ubuntu-linux:~$ whereis redis-cliredis-cli:ubuntu@ubuntu-linux:~$ whereis redis-serverredis-server: 2ã€å®‰è£… Redisé€šè¿‡ apt-get å‘½ä»¤å®‰è£… å‘½ä»¤ï¼š 12sudo apt-get updatesudo apt-get install redis-server é€šè¿‡ä¸‹è½½å®˜æ–¹å®‰è£…åŒ…è¿›è¡Œå®‰è£…å¹¶è§£å‹ æœ¬æ–‡ä¸æ˜¯ç”¨ root ç”¨æˆ·å®‰è£… å‘½ä»¤ï¼š 12wget http://download.redis.io/releases/redis-4.0.2.tar.gztar -zxvf redis-4.0.2.tar.gz ç§»åˆ°è§£å‹åçš„ Redis åˆ°/usr/local/redis-4.0.2 1sudo mv redis-4.0.2 /usr/local/ ç¼–è¯‘ä»¥åŠå®‰è£… 123cd /usr/local/redis-4.0.2makesuod make install 3ã€å¯åŠ¨ Redis1sudo /usr/local/bin/redis-server ==æ³¨æ„ï¼šé root å¯åŠ¨,å¦‚æœç”¨å‘½ä»¤ç›´æ¥å…³é—­redisï¼Œredisæ— æ³•ç»“æŸè¿›ç¨‹== 123411462:M 21 Nov 17:15:54.777 # User requested shutdown...11462:M 21 Nov 17:15:54.777 * Saving the final RDB snapshot before exiting.11462:M 21 Nov 17:15:54.777 # Failed opening the RDB file dump.rdb (in server root dir /usr/local/bin) for saving: Permission denied11462:M 21 Nov 17:15:54.777 # Error trying to save the DB, can't exit. æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨ 12sudo /usr/local/bin/redis-server /usr/local/redis-4.0.2/redis.conf &amp; æ£€æµ‹åå°è¿›ç¨‹æ˜¯å¦å­˜åœ¨ 1ps -ef |grep redis æ£€æµ‹ 6379 ç«¯å£æ˜¯å¦åœ¨ç›‘å¬ 1netstat -lntp | grep 6379 ä½¿ç”¨ redis-cli è¿›è¡Œè¿æ¥ 12345678ubuntu@ubuntu-linux:/usr/local/bin$ redis-cli127.0.0.1:6379&gt; keys *(empty list or set)127.0.0.1:6379&gt; set redis redis-4.0.2OK127.0.0.1:6379&gt; get redis\"redis-4.0.2\"127.0.0.1:6379&gt; 4ã€åœæ­¢ Redis ä½¿ç”¨ redis-cli åœæ­¢ 1redis-cli shutdown æˆ–åœ¨ redis-cli å‘½ä»¤è¡Œä¸­åœæ­¢ 12127.0.0.1:6379&gt; shutdownnot connected&gt; ç›´æ¥ kill æ‰è¿›ç¨‹ï¼ˆ Redis å¯ä»¥å¦¥å–„å¤„ç† SIGTERM ä¿¡å·ï¼‰ 1kill -9 PID æ€»ç»“Redis æ˜¯å¼€å‘äººå‘˜å¿…å¤‡çš„åˆ©å™¨ï¼ŒæŒæ¡å¥½ Redis çš„åŠŸèƒ½ç‰¹æ€§å¹¶ä½¿ç”¨åˆ°å®é™…åœºæ™¯æ‰èƒ½çœŸæ­£ä½“ä¼šåˆ° Redis çš„å¸¦æ¥çš„ä¾¿åˆ©ã€‚ç›®å‰ Redis ä¸»è¦åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š æ„å»ºé«˜å¯ç”¨çš„ç¼“å­˜ç³»ç»Ÿ ç§¯åˆ†æ’è¡Œæ¦œï¼ˆ sorted set ï¼‰ è®¡æ•°å™¨ åˆ†å¸ƒå¼é” æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆ message queue / pub/sub) webæœåŠ¡å™¨çš„sessionç®¡ç† å‚è€ƒèµ„æ–™ Redis Redis wikipedia the-little-redis-book Redis3.0å®˜æ–¹æ–‡æ¡£ç¿»è¯‘å’Œæºç è§£æ","categories":[{"name":"Technology","slug":"Technology","permalink":"https://blog.51itzone.cn/categories/Technology/"},{"name":"Redis","slug":"Technology/Redis","permalink":"https://blog.51itzone.cn/categories/Technology/Redis/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://blog.51itzone.cn/tags/Ubuntu/"},{"name":"redis","slug":"redis","permalink":"https://blog.51itzone.cn/tags/redis/"}]},{"title":"LinkedList å®ç°åˆ†æåŠä½¿ç”¨","slug":"linkedlist-analysis-and-use","date":"2016-02-26T10:46:00.000Z","updated":"2018-08-20T02:11:16.648Z","comments":true,"path":"2016/02/26/linkedlist-analysis-and-use/","link":"","permalink":"https://blog.51itzone.cn/2016/02/26/linkedlist-analysis-and-use/","excerpt":"jdkä¸­çš„ç»å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯ç»è¿‡åƒé”¤ç™¾ç‚¼çš„ï¼Œä»£ç è´¨é‡éå¸¸ä¹‹é«˜ï¼Œåœ¨äº†è§£å…¶åº•å±‚å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ç¼–ç è§„èŒƒï¼Œå…»æˆè‰¯å¥½çš„ä¹ æƒ¯ã€‚çŸ¥è¯†åœ¨äºæ€»ç»“å’Œåˆ©ç”¨ï¼ŒåŸºç¡€çŸ¥è¯†çš„å®Œå–„ä¼šè®©å·¥ä½œå˜æ›´åŠ è½»æ¾ã€‚æœ¬æ–‡é€šè¿‡åˆ†æ LinkedList çš„åº•å±‚å®ç°æ¥å­¦ä¹  LinkdedList çš„ä½¿ç”¨ã€‚","text":"jdkä¸­çš„ç»å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯ç»è¿‡åƒé”¤ç™¾ç‚¼çš„ï¼Œä»£ç è´¨é‡éå¸¸ä¹‹é«˜ï¼Œåœ¨äº†è§£å…¶åº•å±‚å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ç¼–ç è§„èŒƒï¼Œå…»æˆè‰¯å¥½çš„ä¹ æƒ¯ã€‚çŸ¥è¯†åœ¨äºæ€»ç»“å’Œåˆ©ç”¨ï¼ŒåŸºç¡€çŸ¥è¯†çš„å®Œå–„ä¼šè®©å·¥ä½œå˜æ›´åŠ è½»æ¾ã€‚æœ¬æ–‡é€šè¿‡åˆ†æ LinkedList çš„åº•å±‚å®ç°æ¥å­¦ä¹  LinkdedList çš„ä½¿ç”¨ã€‚ LinkedList å®ç°åˆ†æLinkedList æ˜¯å®ç° list çš„çº¿æ€§å­˜å‚¨ç»“æ„çš„ä¸€ä¸ªé‡è¦çš„å®ç°ç±»ï¼ŒLinkedList æ˜¯é€šè¿‡é“¾è¡¨çš„å½¢å¼å­˜æ”¾æ•°æ®ï¼Œè€ŒArrayListå’ŒVectoræ˜¯é€šè¿‡æ•°ç»„å­˜å‚¨çš„é¡ºåºç»“æ„ã€‚å½“ç„¶ï¼Œ LinkedList ä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä»¬ä¼šåœ¨åæ–‡è¯´æ˜å¦‚ä½•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨å®ƒã€‚ LinkedListå…·ä½“å®ç°ç±»å›¾å¦‚ä¸‹ï¼š é€šè¿‡å›¾ä¸­çš„æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ° LinkedList å³å®ç°äº† list æ¥å£åˆå®ç°äº† Deque æ¥å£ã€‚é‚£è¯´æ˜ LinkedList å…·æœ‰æ‰€æœ‰ list çš„åŠŸèƒ½åŒæ—¶ï¼Œè¿˜å…·å¤‡é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚é€šè¿‡é˜…è¯» JDK çš„æºç æ–‡æ¡£ï¼Œæˆ‘ä»¬å‘ç° LinkedList æ˜¯åŸºäºåŒå‘é˜Ÿåˆ—çš„æ•°æ®ç»“æ„å®ç°çš„ ï¼ˆDoubly-linked listï¼‰ã€‚ å…·ä½“ç»“æ„æˆ‘ä»¬å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„LinkedList æ˜¯é€šè¿‡é“¾è¡¨ç»“æ„æ¥å­˜å‚¨æ•°æ®,è€Œä¸”å®ç°çš„æ˜¯åŒå‘é“¾è¡¨ã€‚åŒå‘é“¾è¡¨æ˜¯æ•°æ®ç»“æ„çš„ä¸€ç§å½¢å¼ï¼Œä»–çš„æ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œ prev æŒ‡å‘ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œnext æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™ç§ç»“æ„æœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢ï¼Ÿä»–å¯ä»¥å®ç°åŒå‘éå†ï¼Œè¿™ä½¿å¾—åœ¨é“¾è¡¨ä¸­çš„æ•°æ®è¯»å–å˜å¾—éå¸¸çµæ´»è‡ªç”±ã€‚åŒæ—¶ï¼ŒLinkedList ä¸­ç»´æŠ¤äº†ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘å¤´éƒ¨ï¼Œä¸€ä¸ªæŒ‡å‘å°¾éƒ¨ã€‚ç»´æŠ¤è¿™ä¸¤ä¸ªæŒ‡é’ˆåï¼Œå¯ä»¥ä½¿å¾—å…ƒç´ ä»å¤´éƒ¨æ’å…¥ï¼Œä¹Ÿå¯ä»¥ä½¿å…ƒç´ ä»å°¾éƒ¨æ’å…¥ã€‚åŸºäºæ–¹å¼ï¼Œç”¨æˆ·å¾ˆå®¹æ˜“å°±èƒ½å®ç° FIFO(é˜Ÿåˆ—)ï¼Œ LIFO(æ ˆ)ç­‰æ•ˆæœã€‚é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æºç ä¸­çš„å…·ä½“å®ç°ã€‚ Nodeå®šä¹‰1234567891011private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next; Node&lt;E&gt; prev; Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; this.item = element; this.next = next; this.prev = prev; &#125;&#125; LinkedListåˆ—è¡¨çš„æ–°å¢123456789101112131415161718public boolean add(E e) &#123; linkLast(e); return true;&#125;/*** Links e as last element.*/void linkLast(E e) &#123; final Node&lt;E&gt; l = last; final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); last = newNode; if (l == null) first = newNode; else l.next = newNode; size++; modCount++;&#125; å¯è§æ¯æ¬¡æ’å…¥éƒ½æ˜¯ç§»åŠ¨å¼•ç”¨ï¼Œå’Œ ArrayList çš„æ‹·è´æ•°ç»„æ¥è¯´æ•ˆç‡è¦é«˜ä¸Šä¸å°‘ã€‚ LinkedListåˆ—è¡¨çš„æŸ¥è¯¢1234567891011121314151617181920public E get(int index) &#123; checkElementIndex(index); return node(index).item;&#125;Node&lt;E&gt; node(int index) &#123; // assert isElementIndex(index); if (index &lt; (size &gt;&gt; 1)) &#123; Node&lt;E&gt; x = first; for (int i = 0; i &lt; index; i++) x = x.next; return x; &#125; else &#123; Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x; &#125;&#125; LinkedListä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥çœ‹ index ç¦» size ä¸­é—´è·ç¦»æ¥åˆ¤æ–­æ˜¯ä»å¤´ç»“ç‚¹æ­£åºæŸ¥è¿˜æ˜¯ä»å°¾èŠ‚ç‚¹å€’åºæŸ¥ã€‚è¿™æ ·çš„æ•ˆç‡æ˜¯éå¸¸ä½çš„ï¼Œç‰¹åˆ«æ˜¯å½“ index è·ç¦» size çš„ä¸­é—´ä½ç½®è¶Šè¿œæ—¶ã€‚ LinkedList è¿­ä»£å®ç°LinkedList çš„è¿­ä»£å™¨å®ç°æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯å®ç°äº†Iteratoræ¥å£çš„DescendingIteratorï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯å®ç°äº† ListIterator æ¥å£çš„ ListItr ã€‚ ListItr å®ç°ListItréå†éœ€è¦æŒ‡å®šä¸€ä¸ªèµ·å§‹å€¼ 1234public ListIterator&lt;E&gt; listIterator(int index) &#123; checkPositionIndex(index); return new ListItr(index);&#125; ListItr ä¼šåˆ›å»ºä¸€ä¸ªä»¥ index ä¸ºèµ·å§‹å€¼çš„è¿­ä»£å™¨ï¼Œç„¶åç”¨æˆ·ä¾¿å¯ä»¥ä»¥è¿™ä¸ªä½ç½®ä¸ºèµ·ç‚¹ï¼Œå®ç°å‘å‰æˆ–è€…å‘åéå†ã€‚ 12345678910111213141516171819202122232425262728ListItr(int index) &#123; // å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œå°†nextæŒ‡é’ˆæŒ‡å‘æŒ‡å®šä½ç½®çš„å…ƒç´  next = (index == size) ? null : node(index); nextIndex = index;&#125;// å‘åéå†public E next() &#123; checkForComodification(); if (!hasNext()) throw new NoSuchElementException(); lastReturned = next; next = next.next; nextIndex++; return lastReturned.item;&#125;// å‘å‰éå†public E previous() &#123; checkForComodification(); if (!hasPrevious()) throw new NoSuchElementException(); lastReturned = next = (next == null) ? last : next.prev; nextIndex--; return lastReturned.item;&#125; DescendingIterator å®ç°DescendingIterator è¿­ä»£å™¨å®ç°çš„æ˜¯å¯¹é“¾è¡¨ä»å°¾éƒ¨å‘å¤´éƒ¨éå†çš„åŠŸèƒ½ï¼Œä»–å¤ç”¨äº†ListIträ¸­çš„previousæ–¹æ³•ï¼Œå°†å½“å‰ä½ç½®æŒ‡å‘é“¾è¡¨å°¾éƒ¨ï¼Œç„¶åé€ä¸ªå‘å‰éå†ã€‚ 123456789101112private class DescendingIterator implements Iterator&lt;E&gt; &#123; private final ListItr itr = new ListItr(size()); public boolean hasNext() &#123; return itr.hasPrevious(); &#125; public E next() &#123; return itr.previous(); &#125; public void remove() &#123; itr.remove(); &#125;&#125; LinkedList çš„é˜Ÿåˆ—å®ç°ä»å›¾1æˆ‘ä»¬å¯ä»¥å‘ç° LinkedList å®ç°äº† Deque æ¥å£ï¼Œä»¥ä¸‹æˆ‘ä»¬å¯ä»¥ä»å®ç°é˜Ÿåˆ—çš„åŠŸèƒ½æ¥çœ‹ LinkedList çš„æºç  LikedList çš„ FIFO é˜Ÿåˆ—çš„å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667// å…¥é˜ŸåŠŸèƒ½ï¼Œå…¥å°¾//åœ¨é˜Ÿåˆ—å°¾éƒ¨å¢åŠ ä¸€æ¡è®°å½•ï¼Œå»ºè®®ä½¿ç”¨public boolean offer(E e) &#123; return add(e);&#125;public boolean offerLast(E e) &#123; addLast(e); return true;&#125;//åœ¨é˜Ÿåˆ—å°¾éƒ¨å¢åŠ ä¸€æ¡è®°å½•public boolean add(E e) &#123; linkLast(e); return true;&#125;//æ–¹æ³•åŒ…è£…ï¼ŒåŒæ ·è°ƒç”¨äº†linkLastçš„æ–¹æ³•public void addLast(E e) &#123; linkLast(e);&#125;void linkLast(E e) &#123; final Node&lt;E&gt; l = last; //åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°† prev æŒ‡é’ˆæŒ‡å‘é“¾è¡¨çš„å°¾èŠ‚ç‚¹ final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); last = newNode; //å°†lastæŒ‡é’ˆæŒ‡å‘æ–°åˆ›å»ºçš„è¿™ä¸ªèŠ‚ç‚¹ if (l == null) //å¦‚æœå½“å‰é“¾è¡¨ä¸ºç©ºï¼Œé‚£ä¹ˆå°†å¤´æŒ‡é’ˆä¹ŸæŒ‡å‘è¿™ä¸ªèŠ‚ç‚¹ first = newNode; else //å°†é“¾è¡¨çš„å°¾èŠ‚ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘æ–°å»ºçš„èŠ‚ç‚¹ï¼Œè¿™æ ·å°±å®Œæ•´çš„å®ç°äº†åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„åŠŸèƒ½ l.next = newNode; size++; modCount++;&#125;//å‡ºé˜ŸåŠŸèƒ½ï¼Œä»å°¾å‡ºé˜Ÿ//åœ¨é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä¸€ä¸ªå…ƒç´ å¹¶åˆ é™¤ï¼Œ é˜Ÿåˆ—æ“ä½œå»ºè®®ä½¿ç”¨è¿™ä¸ªæ–¹æ³•public E poll() &#123; final Node&lt;E&gt; f = first; return (f == null) ? null : unlinkFirst(f);&#125;//åŒä¸Šï¼Œéƒ½è°ƒç”¨äº† unlinkFirst æ–¹æ³•public E pollFirst() &#123; final Node&lt;E&gt; f = first; return (f == null) ? null : unlinkFirst(f);&#125;private E unlinkFirst(Node&lt;E&gt; f) &#123; // assert f == first &amp;&amp; f != null; final E element = f.item; final Node&lt;E&gt; next = f.next; f.item = null; f.next = null; // help GC first = next; if (next == null) last = null; else next.prev = null; size--; modCount++; return element;&#125; LinkedList çš„ LIFO (æ ˆ)å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// åœ¨é“¾è¡¨çš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ public void push(E e) &#123; addFirst(e);&#125;// addFirst è°ƒç”¨çš„å°±æ˜¯ linkFirst ï¼Œè¿™æ®µä»£ç å°±æ˜¯å®ç°å°†å…ƒç´ æ·»åŠ çš„é“¾è¡¨å¤´éƒ¨ã€‚private void linkFirst(E e) &#123; final Node&lt;E&gt; f = first; // åˆ›å»ºä¸€ä¸ªæ–°å…ƒç´ ï¼Œå°†å…ƒç´ çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰çš„å¤´ç»“ç‚¹ final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f); // å°†å¤´æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªèŠ‚ç‚¹ã€‚ first = newNode; if (f == null) // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™æŠŠå°¾æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªèŠ‚ç‚¹ã€‚ last = newNode; else // å°†å½“å‰å¤´ç»“ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘æ­¤ç»“ç‚¹ã€‚ f.prev = newNode; size++; modCount++;&#125;// å¼¹å‡ºé¡¶éƒ¨ç»“ç‚¹ã€‚public E pop() &#123; return removeFirst();&#125;// removeFirst è°ƒç”¨çš„å°±æ˜¯ unlinkFirstï¼ŒunlinkFirst å®ç°å°†é“¾è¡¨é¡¶éƒ¨å…ƒç´ åˆ é™¤private E unlinkFirst(Node&lt;E&gt; f) &#123; // assert f == first &amp;&amp; f != null; final E element = f.item; final Node&lt;E&gt; next = f.next; f.item = null; f.next = null; // help GC first = next; if (next == null) last = null; else next.prev = null; size--; modCount++; return element;&#125;// è·å–é¡¶éƒ¨ç»“ç‚¹ï¼Œä½†æ˜¯ä¸åˆ é™¤public E peek() &#123; final Node&lt;E&gt; f = first; return (f == null) ? null : f.item;&#125; æ€»ç»“ï¼š å…‹æœæ•°ç»„é“¾è¡¨éœ€è¦é¢„å…ˆçŸ¥é“æ•°æ®å¤§å°çš„ç¼ºç‚¹ã€‚ å¯ä»¥å……åˆ†åˆ©ç”¨è®¡ç®—æœºå†…å­˜ç©ºé—´ï¼Œå®ç°çµæ´»çš„å†…å­˜åŠ¨æ€ç®¡ç†ã€‚ LinkedList æ’å…¥ï¼Œåˆ é™¤éƒ½æ˜¯ç§»åŠ¨å¼•ç”¨æ•ˆç‡å¾ˆé«˜ã€‚ æŸ¥æ‰¾éœ€è¦è¿›è¡Œéå†æŸ¥è¯¢ï¼Œæ•ˆç‡è¾ƒä½ã€‚","categories":[{"name":"Technology","slug":"Technology","permalink":"https://blog.51itzone.cn/categories/Technology/"},{"name":"Java","slug":"Technology/Java","permalink":"https://blog.51itzone.cn/categories/Technology/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://blog.51itzone.cn/tags/Java/"}]},{"title":"ArrayList & Vector å®ç°åˆ†æ","slug":"ArrayList-Vector-analysis","date":"2016-02-20T10:46:00.000Z","updated":"2018-08-20T02:11:16.647Z","comments":true,"path":"2016/02/20/ArrayList-Vector-analysis/","link":"","permalink":"https://blog.51itzone.cn/2016/02/20/ArrayList-Vector-analysis/","excerpt":"é€šè¿‡é˜…è¯» ArrayList ä¸ Verctor çš„æºç æˆ‘ä»¬å‘ç°ï¼Œå®ƒä»¬çš„ä»£ç å®ç°è¿‘ä¼¼åº¦å‡ ä¹åœ¨90%ã€‚æ‰€ä»¥æˆ‘æŠŠå®ƒä»¬ä¸¤ä¸ªåˆå¹¶èµ·æ¥è¿›è¡Œè¯´æ˜ï¼Œç»†å¿ƒçš„è¯»è€…å¯ä»¥è‡ªè¡Œå»IDEä¸­é˜…è¯»ï¼Œæ¯”å¯¹ä»–ä»¬çš„å®ç°ç»“æ„ã€‚æœ¬æ–‡ä¸»è¦ç»“åˆ JDK8 æºç ä»‹ç»äº† ArrayList å’Œ Vector çš„åˆ›å»ºã€å¢ã€åˆ ã€æ”¹ä»¥åŠé›†åˆçš„è¿­ä»£å’Œ fail-fast æœºåˆ¶ï¼Œå¹¶è¯´æ˜äº†åœ¨æ“ä½œå­é›†çš„ä¸€äº›æ³¨æ„äº‹é¡¹åŠåŸå› ã€‚ æ— ç‰¹åˆ«è¯´æ˜ï¼ŒJDK æºç è®²è§£éƒ½æ˜¯åŸºäº JDK8 è¿›è¡Œçš„åˆ†æã€‚","text":"é€šè¿‡é˜…è¯» ArrayList ä¸ Verctor çš„æºç æˆ‘ä»¬å‘ç°ï¼Œå®ƒä»¬çš„ä»£ç å®ç°è¿‘ä¼¼åº¦å‡ ä¹åœ¨90%ã€‚æ‰€ä»¥æˆ‘æŠŠå®ƒä»¬ä¸¤ä¸ªåˆå¹¶èµ·æ¥è¿›è¡Œè¯´æ˜ï¼Œç»†å¿ƒçš„è¯»è€…å¯ä»¥è‡ªè¡Œå»IDEä¸­é˜…è¯»ï¼Œæ¯”å¯¹ä»–ä»¬çš„å®ç°ç»“æ„ã€‚æœ¬æ–‡ä¸»è¦ç»“åˆ JDK8 æºç ä»‹ç»äº† ArrayList å’Œ Vector çš„åˆ›å»ºã€å¢ã€åˆ ã€æ”¹ä»¥åŠé›†åˆçš„è¿­ä»£å’Œ fail-fast æœºåˆ¶ï¼Œå¹¶è¯´æ˜äº†åœ¨æ“ä½œå­é›†çš„ä¸€äº›æ³¨æ„äº‹é¡¹åŠåŸå› ã€‚ æ— ç‰¹åˆ«è¯´æ˜ï¼ŒJDK æºç è®²è§£éƒ½æ˜¯åŸºäº JDK8 è¿›è¡Œçš„åˆ†æã€‚ ArrayList å’Œ Vector çš„å¼‚åŒåœ¨è®²å®ƒä»¬çš„å¼‚åŒç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ ArrayList å’Œ Vector çš„ç»§æ‰¿ç»“æ„å›¾ ç›¸åŒç‚¹ éƒ½æ˜¯æœ‰åºçš„ï¼Œæ’å…¥å…ƒç´ å¯é‡å¤ï¼Œæ”¯æŒæ’å…¥ null ï¼Œæ”¯æŒéšæœºè®¿é—®ã€‚ ä»ä¸Šå›¾å¯ä»¥å‘ç° ArrayList å’Œ Vector ç»§æ‰¿äº†ç›¸åŒçš„çˆ¶ç±»å’Œå®ç°äº†ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥æä¾›çš„åŠŸèƒ½ä¹ŸåŸºæœ¬ç›¸åŒã€‚ é›†åˆä¸­ç»´æŠ¤çš„éƒ½æ˜¯ Object ç±»å‹çš„æ•°ç»„ï¼Œé€šè¿‡æ³›å‹æ–¹å¼æ¥æŒ‡å®šæ•°ç»„çš„ç±»å‹ã€‚ åˆå§‹å¦‚æœæ²¡æœ‰æŒ‡å®šé›†åˆçš„é•¿åº¦å¤§å°ï¼Œåˆ™é›†åˆé»˜è®¤æ•°ç»„é•¿åº¦éƒ½ä¸º10ã€‚ éƒ½å®ç°äº† Iterator å’Œ ListIterator æ¥å£ï¼Œæ‰€ä»¥å…·æœ‰ç›¸åŒçš„éå†æ–¹å¼ã€‚ ArrayList å’Œ Vector éƒ½å…·æœ‰åŠ¨æ€æ‰©å®¹çš„ç‰¹æ€§ã€‚ ä¸åŒç‚¹ Vector çš„å®ç°æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºæ“ä½œé›†åˆçš„æ–¹æ³•ä½¿ç”¨äº†å…³é”®å­— Synchronized ï¼Œè€Œä½¿ç”¨çº¿ç¨‹åŒæ­¥çš„æœ€å¤§é—®é¢˜å°±æ˜¯å¤§å¹¶å‘ä¸‹ï¼Œæ“ä½œé›†åˆç¨‹åºæ€§èƒ½ä¼šä¸¥é‡é™ä½ï¼Œè€Œ ArrayList çš„å®ç°æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¸è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„æƒ…å†µï¼Œå°½é‡ä½¿ç”¨ ArrayListã€‚ å½“ ArrayList å’Œ Vector çš„å¤§å°è¶…è¿‡å½“å‰æ‰€èƒ½å®¹çº³å…ƒç´ çš„æ•°ç»„å¤§å°æ—¶ï¼ŒArrayList ä¼šæ‰©å¤§ä¸ºå½“å‰æ•°ç»„çš„ 50% æ¥å®¹çº³æ–°å…ƒç´ ï¼Œè€Œ Vectorä¸­æœ‰ä¸€ä¸ªcapacityIncrement å˜é‡ï¼Œå¦‚æœ capacityIncrement &gt; 0, åˆ™æ¯æ¬¡æ‰©å®¹éƒ½åœ¨åŸæ¥å¤§å°åŸºç¡€ä¸Šå¢åŠ  capacityIncrement å¤§å°ï¼Œ åä¹‹ï¼ŒVector å°±åœ¨åŸå¤§å°åŸºç¡€ä¸Šå†æ‰©å……ä¸€å€ã€‚ Vectorä¸­æœ‰ä¸€ä¸ªæ–¹æ³• setSize(int newSize)ï¼Œè€ŒArrayListå¹¶æ²¡æœ‰ã€‚ setSize å…è®¸ç”¨æˆ·ä¸»åŠ¨è®¾ç½®å®¹å™¨å¤§å°ï¼Œå¦‚æœnewSizeå°äºå½“å‰ size ï¼Œé‚£ä¹ˆelementData æ•°ç»„ä¸­åªä¼šä¿ç•™ newSize ä¸ªå…ƒç´ ï¼Œå¤šå‡ºæ¥çš„ä¼šè®¾ä¸º nullã€‚å¦‚æœnewSizeå¤§äºå½“å‰ size ï¼Œé‚£ä¹ˆå°±æ‰©å®¹åˆ° newSize å¤§å°ï¼Œæ•°ç»„ä¸­å¤šå‡ºæ¥çš„éƒ¨åˆ†è®¾ä¸º nullï¼Œä»¥åæ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¹‹å‰å¤šå‡ºæ¥çš„éƒ¨åˆ†å°±ä¼šä»¥ null çš„å½¢å¼å­˜åœ¨ã€‚ é›†åˆåˆ›å»ºArrayList123456789101112131415161718192021222324252627282930313233343536373839404142434445464748private static final int DEFAULT_CAPACITY = 10;/** * Shared empty array instance used for empty instances. */private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;;/*** åºåˆ—åŒ–æ—¶ï¼Œå¿½ç•¥è¯¥å€¼*/transient Object[] elementData;/** * Shared empty array instance used for default sized empty instances. We * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when * first element is added. * ä¸ EMPTY_ELEMENTDATA åŒºåˆ†å¼€çš„ç›®çš„æ˜¯ï¼Œæ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™å¯ä»¥ç¡®å®šæ•°ç»„çš„æŒ‡å®šé•¿åº¦ */private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;private int size;public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123; this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException(\"Illegal Capacity: \"+ initialCapacity); &#125;&#125;public ArrayList() &#123; this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;&#125;public ArrayList(Collection&lt;? extends E&gt; c) &#123; elementData = c.toArray(); if ((size = elementData.length) != 0) &#123; // c.toArray might (incorrectly) not return Object[] (see 6260652) if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); &#125; else &#123; // replace with empty array. this.elementData = EMPTY_ELEMENTDATA; &#125;&#125; ArrayList æä¾›äº†ä¸‰ç§æ–¹å¼æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œå½“ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆå§‹åŒ–é›†åˆæ—¶ï¼Œæ•°æ®å­˜å‚¨åœ¨é™æ€å˜é‡ DEFAULTCAPACITY_EMPTY_ELEMENTDATA æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯ç”± static å’Œ final ä¿®é¥°ï¼Œä½¿ç”¨é™æ€å˜é‡çš„å¥½å¤„å°±æ˜¯ JVM åŠ è½½ç±»çš„åŒæ—¶ï¼Œä¼šæŠŠé™æ€å˜é‡å­˜å‚¨äº JVM çš„æ–¹æ³•åŒºï¼ˆå„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼‰ï¼Œä¸æ¯æ¬¡ new Object[initialCapacity] ç›¸æ¯”ï¼Œå°±å‡å°‘äº†ç³»ç»Ÿçš„å¼€é”€ï¼Œè€Œä½¿ç”¨ final ä¿®é¥°æŒ‡å®šè¯¥å˜é‡ä¸èƒ½ä¿®æ”¹ï¼Œæ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå…¬å…±å˜é‡ï¼Œä¿®æ”¹åï¼Œä¼šå½±å“åç»­æ–°åˆå§‹åŒ–çš„ ArrayListã€‚å¦‚æœä½¿ç”¨å¯ä»¥æŒ‡å®šé›†åˆåˆå§‹åŒ–å¤§å°æ„é€ å™¨è¿›è¡Œï¼Œå¦‚æœæŒ‡å®šå¤§å°ä¸º0 ï¼Œåˆ™æŠŠ EMPTY_ELEMENTDATA èµ‹å€¼ç»™åˆ elementDataï¼Œå¦‚æœæŒ‡å®šçš„å¤§å°å¤§äº 0 ï¼Œåˆ™éœ€è¦ new Object[initialCapacity] å¹¶æŠŠæ–°åˆ›å»ºçš„æ•°ç»„èµ‹å€¼ç»™ elementData æ•°ç»„å˜é‡ã€‚DEFAULTCAPACITY_EMPTY_ELEMENTDATA å’Œ EMPTY_ELEMENTDATA ä¸»è¦æ˜¯ä¸ºäº†åŒºåˆ†ä¸åŒæ„é€ å™¨åˆ›å»ºçš„ ArrayList å¯¹è±¡ï¼Œè¿™ä¸ªåé¢ä¼šè¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚ ArrayList æä¾›æ¥å—å®ç° Collection æ¥å£çš„å®ç°ç±»æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ Vector123456789101112131415161718192021222324252627282930protected Object[] elementData;protected int elementCount;protected int capacityIncrement;public Vector(int initialCapacity, int capacityIncrement) &#123; super(); if (initialCapacity &lt; 0) throw new IllegalArgumentException(\"Illegal Capacity: \" + initialCapacity); this.elementData = new Object[initialCapacity]; this.capacityIncrement = capacityIncrement;&#125;public Vector(int initialCapacity) &#123; this(initialCapacity, 0);&#125;public Vector() &#123; this(10);&#125;public Vector(Collection&lt;? extends E&gt; c) &#123; elementData = c.toArray(); elementCount = elementData.length; // c.toArray might (incorrectly) not return Object[] (see 6260652) if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, elementCount, Object[].class);&#125; Vector ä¸ ArrayList ä¸åŒçš„æ˜¯æä¾›äº†ä¸€ä¸ªå¯ä»¥æŒ‡å®š capacityIncrement ï¼ˆå¢åŠ å› å­ï¼‰çš„æ„é€ å™¨ï¼Œå¢é•¿å› å­çš„ä½œç”¨ä¸»è¦æ˜¯å¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹æ—¶ï¼ŒæŒ‡å®šæ•°ç»„åœ¨åŸæ¥æ•°ç»„é•¿åº¦çš„åŸºç¡€ä¸Šåœ¨æ‰©å®¹å¤šå¤§ã€‚ é›†åˆå¢åŠ ã€ä¿®æ”¹å…ƒç´ ArrayList é›†åˆæ–°å¢å…ƒç´ ä¸»è¦æ˜¯è°ƒç”¨ add(E e) å’Œ add(int index, E element) æ–¹æ³•ï¼Œæ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œéƒ½éœ€è¦å¯¹æ•°ç»„æ‰©å®¹è¿›è¡Œæ£€æŸ¥ï¼Œadd(E e) åœ¨æ•°ç»„æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œadd(int index, E element) æ˜¯åœ¨æ•°ç»„æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ ï¼Œæ‰€ä»¥è¯¥ä½ç½®åçš„åŸæ•°ç»„å…ƒç´ éƒ½è¦å‘åç§»åŠ¨ä¸€ä½ã€‚ä¿®æ”¹å…ƒç´ è°ƒç”¨ set(int index, E e)ï¼Œæ›¿æ¢æ‰å…ƒæ•°ç»„ï¼Œsize ä¸å˜ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡å…·ä½“æºç è¿›è¡Œå­¦ä¹ ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123public boolean add(E e) &#123; // æ£€æŸ¥æ‰©å®¹ ensureCapacityInternal(size + 1); // Increments modCount!! //æ¯æ¬¡éƒ½ä¼šæŠŠæœ€æ–°æ·»åŠ çš„å…ƒç´ æ”¾åˆ°æ•°ç»„æœ«å°¾ elementData[size++] = e; return true;&#125;public void add(int index, E element) &#123; //æ£€æŸ¥æ•°ç»„æ˜¯å¦è¶Šç•Œ rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! //ç§»åŠ¨æŒ‡å®šä½ç½®åçš„å…ƒç´  System.arraycopy(elementData, index, elementData, index + 1, size - index); //æ’å…¥å…ƒç´  elementData[index] = element; size++;&#125;// æ·»åŠ é›†åˆå…ƒç´ public boolean addAll(Collection&lt;? extends E&gt; c) &#123; Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount // æ•°ç»„ç§»åŠ¨å¹¶æ‹·è´åˆ° elementData æ•°ç»„ä¸­ System.arraycopy(a, 0, elementData, size, numNew); size += numNew; return numNew != 0;&#125;//åœ¨æŒ‡å®šä½ç½®æ·»åŠ é›†åˆå…ƒç´ public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123; rangeCheckForAdd(index); Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount int numMoved = size - index; if (numMoved &gt; 0) //å¯¹è‡ªèº«è¿›è¡Œç§»åŠ¨å¹¶ copy å…ƒç´  System.arraycopy(elementData, index, elementData, index + numNew, numMoved); // copy é›†åˆä¸­çš„å…ƒç´ åˆ° elementData ä¸­ System.arraycopy(a, 0, elementData, index, numNew); size += numNew; return numNew != 0;&#125;private static int calculateCapacity(Object[] elementData, int minCapacity) &#123; // DEFAULTCAPACITY_EMPTY_ELEMENTDATA çš„ä½œç”¨ //ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡ï¼Œç¬¬ä¸€æ¬¡æ–°å¢å…ƒç´ æ—¶ï¼ŒæŒ‡å®šæ•°ç»„é»˜è®¤é•¿åº¦ä¸º10 if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; return Math.max(DEFAULT_CAPACITY, minCapacity); &#125; return minCapacity;&#125;private void ensureCapacityInternal(int minCapacity) &#123; ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));&#125;private void ensureExplicitCapacity(int minCapacity) &#123; modCount++; // overflow-conscious code if (minCapacity - elementData.length &gt; 0) grow(minCapacity);&#125;private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;private void grow(int minCapacity) &#123; // overflow-conscious code int oldCapacity = elementData.length; //oldCapacity &gt;&gt; 1å’ŒoldCapacity / 2æ˜¯ç­‰æ•ˆçš„ï¼ŒnewCapacityä¸ºåŸæ¥çš„1.5å€ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) //æ•°ç»„ä¸æ˜¯æ— é™å¤§ï¼Œéœ€æ³¨æ„ newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: //è¿›è¡Œæ•°ç»„æ‹·è´ï¼ŒArrays.copyOfçš„åº•å±‚æ˜¯ä¸€ä¸ªnativeæ–¹æ³• elementData = Arrays.copyOf(elementData, newCapacity);&#125;private static int hugeCapacity(int minCapacity) &#123; if (minCapacity &lt; 0) // overflow throw new OutOfMemoryError(); return (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE;&#125;public E set(int index, E element) &#123; rangeCheck(index); //æŸ¥æ‰¾å…ƒç´  O(1) E oldValue = elementData(index); //æ›¿æ¢æ‰åŸæ•°æ® elementData[index] = element; return oldValue;&#125;private void rangeCheck(int index) &#123; if (index &gt;= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;/** * A version of rangeCheck used by add and addAll. */private void rangeCheckForAdd(int index) &#123; if (index &gt; size || index &lt; 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;@SuppressWarnings(\"unchecked\")E elementData(int index) &#123; return (E) elementData[index];&#125; åŠ¨æ€æ‰©å®¹ArrayList å’Œ Vector çš„æ–°å¢ã€ä¿®æ”¹å…ƒç´ çš„é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œä¸åŒçš„åœ°æ–¹å°±æ˜¯ä¼šåœ¨æ¯ä¸ªæ–¹æ³•ä¸Šä½¿ç”¨ synchronized å…³é”®å­—è¿›è¡ŒåŒæ­¥ï¼Œè¿™é‡Œé‡ç‚¹è¯´æ˜ä¸‹ä»–ä»¬åŠ¨æ€æ‰©å®¹çš„ä¸åŒä¹‹å¤„. Vector çš„åŠ¨æ€æ‰©å®¹æœºåˆ¶ 1234567891011121314151617181920212223242526272829303132333435363738public synchronized boolean add(E e) &#123; modCount++; //æ•°ç»„æ‰©å®¹ ensureCapacityHelper(elementCount + 1); //æœ«å°¾æ’å…¥å…ƒç´  elementData[elementCount++] = e; return true;&#125;private void ensureCapacityHelper(int minCapacity) &#123; // overflow-conscious code if (minCapacity - elementData.length &gt; 0) grow(minCapacity);&#125;private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;private void grow(int minCapacity) &#123; // overflow-conscious code int oldCapacity = elementData.length; // capacityIncrement &gt; 0 åˆ™æ‰©å®¹ capacityIncrement å¤§å°ï¼Œå¦åˆ™æ‰©å®¹åŸæ¥çš„ä¸€å€ int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); elementData = Arrays.copyOf(elementData, newCapacity);&#125;private static int hugeCapacity(int minCapacity) &#123; if (minCapacity &lt; 0) // overflow throw new OutOfMemoryError(); return (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE;&#125; ç»“åˆ ArrayList çš„æ‰©å®¹ä»£ç ï¼Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºä¸ Vector çš„ä¸åŒä¹‹å¤„ï¼Œæ‰€ä»¥ä½¿ç”¨ç±»ä¹‹å‰é˜…è¯»ä»£ç æ˜¯å¾ˆå¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚ åˆ é™¤é›†åˆé‡Œçš„å…ƒç´ æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ ArrayList æ¥è¯´æ˜é›†åˆåˆ é™¤å…ƒç´ çš„é€»è¾‘ï¼Œåˆ é™¤ä¹Ÿåˆ†ä¸ºå¯¹å•ä¸ªå…ƒç´ çš„åˆ é™¤å’Œé›†åˆåˆ é™¤ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586public E remove(int index) &#123; rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved &gt; 0) //ç›´æ¥è¿›è¡Œæ•°ç»„æ‹·è´æ“ä½œï¼ŒæŠŠindexåçš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½ã€‚ System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work return oldValue;&#125;public boolean remove(Object o) &#123; if (o == null) &#123; for (int index = 0; index &lt; size; index++) if (elementData[index] == null) &#123; fastRemove(index); return true; &#125; &#125; else &#123; for (int index = 0; index &lt; size; index++) if (o.equals(elementData[index])) &#123; fastRemove(index); return true; &#125; &#125; return false;&#125;//ä¹‹æ‰€ä»¥å«åšå¿«é€Ÿåˆ é™¤ï¼Œæ˜¯å› ä¸ºä»–è¢«è®¾ç½®ä¸ºä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼Œåªèƒ½åœ¨å†…éƒ¨è°ƒç”¨ï¼Œåˆ é™¤å…ƒç´ çš„æ—¶å€™ï¼Œçœå»äº†æ•°ç»„è¶Šç•Œçš„åˆ¤æ–­ã€‚//ä¹Ÿä¸è¿”å›è¢«åˆ é™¤çš„å…ƒç´ ï¼Œç›´æ¥è¿›è¡Œæ•°ç»„æ‹·è´æ“ä½œã€‚private void fastRemove(int index) &#123; modCount++; int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work&#125;//åˆ é™¤é›†åˆä¸­æŒ‡å®šçš„å…ƒç´ ï¼ŒæŒ‡å®šä¸­çš„é›†åˆå…ƒç´ ä¸èƒ½ä¸º nullpublic boolean removeAll(Collection&lt;?&gt; c) &#123; Objects.requireNonNull(c); return batchRemove(c, false);&#125;// åˆ é™¤ä¸åœ¨é›†åˆä¸­çš„å…ƒç´ public boolean retainAll(Collection&lt;?&gt; c) &#123; Objects.requireNonNull(c); return batchRemove(c, true);&#125;//æ‰¹é‡å¾ªç¯åˆ é™¤private boolean batchRemove(Collection&lt;?&gt; c, boolean complement) &#123; final Object[] elementData = this.elementData; int r = 0, w = 0; boolean modified = false; try &#123; for (; r &lt; size; r++) // c.contains é»˜è®¤çš„æ˜¯ Collection æ¥å£çš„æ–¹æ³•ï¼Œåœ¨ AbstractCollection ä¸­é‡‡ç”¨ Iterator æœºåˆ¶æ¥åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´ ï¼ŒArrayList è‡ªå·±å®ç°äº†æ­¤æ–¹æ³• // complement åˆ é™¤æ–¹æ³•è°ƒç”¨ä¼ å…¥çš„æ˜¯ false // ç¬¬ä¸€ï¼Œä½œè€…å·§å¦™çš„æå–äº†é€»è¾‘ä¸Šçš„æœ€å¤§å…¬çº¦æ•°ï¼Œä»…é€šè¿‡ä¸€è¡Œé€»è¾‘åˆ¤æ–­å°±å®ç°äº†ä¸¤ä¸ªäº’æ–¥çš„æ•ˆæœã€‚ // ç¬¬äºŒï¼Œä½œè€…çš„æ‰€ç”¨æ“ä½œéƒ½é›†ä¸­äº elementData ä¸€ä¸ªæ•°ç»„ä¸Šï¼Œé¿å…äº†èµ„æºçš„æµªè´¹ã€‚ if (c.contains(elementData[r]) == complement) elementData[w++] = elementData[r]; &#125; finally &#123; // Preserve behavioral compatibility with AbstractCollection, even if c.contains() throws. // ç†è®ºä¸Šr==size åªæœ‰å½“å‡ºç°å¼‚å¸¸æƒ…å†µçš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç°r!=sizeï¼Œä¸€æ—¦å‡ºç°äº†å¼‚å¸¸ï¼Œé‚£ä¹ˆåŠ¡å¿…è¦å°†ä¹‹å‰è¢«ä¿®æ”¹è¿‡çš„æ•°ç»„å†è¿˜åŸå›æ¥ã€‚ if (r != size) &#123; System.arraycopy(elementData, r, elementData, w, size - r); w += size - r; &#125; // åˆ é™¤ w ä½ç½®åçš„å…ƒç´  if (w != size) &#123; // clear to let GC do its work for (int i = w; i &lt; size; i++) elementData[i] = null; modCount += size - w; size = w; modified = true; &#125; &#125; return modified;&#125; é›†åˆå…ƒç´ çš„è¿­ä»£ï¼ˆé¡ºåºè¿­ä»£ï¼‰ArrayList è¿­ä»£å™¨æ˜¯é€šè¿‡å®ç° Iterator æ¥å£ å’Œ ListIterator æ¥å£å®ç°é›†åˆçš„é¡ºåºè¿­ä»£ï¼ŒIterator æ¥å£ä¸»è¦æ˜¯å‘åéå†é›†åˆå…ƒç´ ï¼Œéå†çš„åŒæ—¶å¯ä»¥å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œåˆ é™¤ã€‚ListIterator æ˜¯ List æ¥å£æä¾›çš„æ–¹æ³•è¿”å›ç±»å‹ï¼Œé›†åˆç±»è‡ªè¡Œå®ç° ListIterator æ¥å£æ¥å®ç°åŒå‘è¿­ä»£åŠŸèƒ½ï¼Œ åŒæ—¶ ListIterator æ¥å£åœ¨ Iterator æ¥å£çš„åŠŸèƒ½ä¸Šæä¾›äº†å‘å‰éå†ï¼ŒæŒ‡å®šä½ç½®å‰åéå†ï¼Œä¿®æ”¹é›†åˆå…ƒç´ ï¼Œæ·»åŠ é›†åˆå…ƒç´ çš„åŠŸèƒ½ã€‚æˆ‘ä»¬é€šè¿‡æºç å…·ä½“åˆ†æ ArrayList è¿­ä»£å™¨çš„å®ç°ã€‚ Iterator æ¥å£Iterator æ¥å£è§„èŒƒäº† Java é›†åˆè¿­ä»£çš„æ–¹å¼ï¼Œé€šè¿‡ä½¿ç”¨è¿­ä»£å™¨ï¼Œæ–¹ä¾¿çš„è¿­ä»£é›†åˆä¸­çš„å…ƒç´ ã€‚åŒæ—¶ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼é‡Œçš„è¿­ä»£å™¨æ¨¡å¼åœ¨ JDK é‡Œçš„å…·ä½“å®ç°ã€‚Javaé›†åˆä¸­å®ç° Collection æ¥å£çš„éƒ½å®ç°äº† Iterable æ¥å£ã€‚ Iterable æ¥å£12345678910111213141516171819public interface Iterable&lt;T&gt; &#123; Iterator&lt;T&gt; iterator(); // add JDK1.8 default void forEach(Consumer&lt;? super T&gt; action) &#123; Objects.requireNonNull(action); for (T t : this) &#123; action.accept(t); &#125; &#125; // add JDK1.8 // JDK 1.8 æä¾›çš„åˆ†å‰²è¿­ä»£ default Spliterator&lt;T&gt; spliterator() &#123; return Spliterators.spliteratorUnknownSize(iterator(), 0); &#125;&#125; 123456789101112131415161718192021222324 public interface Iterator&lt;E&gt; &#123; //åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªå…ƒç´ å¯¹è±¡ boolean hasNext(); //è·å–ä¸‹ä¸€ä¸ªå…ƒç´  E next(); // JDK 1.8 æ”¯æŒæ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥æœ‰å®ç° //åˆ é™¤ä¸€ä¸ªå…ƒç´  default void remove() &#123; throw new UnsupportedOperationException(\"remove\"); &#125; // JDK 1.8 æ–°å¢ default void forEachRemaining(Consumer&lt;? super E&gt; action) &#123; Objects.requireNonNull(action); while (hasNext()) action.accept(next()); &#125; &#125;` ArrayList çš„ iterator ä»£ç å®ç°åˆ†æ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155//Iterable æ¥å£çš„æ–¹æ³•å®ç°public Iterator&lt;E&gt; iterator() &#123; return new Itr();&#125;//An optimized version of AbstractList.Itr//å¤§å®¶å¯ä»¥çœ‹ä¸‹ AbstractList çš„ Itr å®ç°private class Itr implements Iterator&lt;E&gt; &#123; // æ¸¸æ ‡ int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such //é›†åˆä¿®æ”¹æ ‡å¿— //å…³äºå¿«é€Ÿå¤±è´¥æœºåˆ¶çš„å®ç°ï¼Œç¨åä¼šæœ‰è®²è§£ int expectedModCount = modCount; Itr() &#123;&#125; public boolean hasNext() &#123; return cursor != size; &#125; @SuppressWarnings(\"unchecked\") public E next() &#123; // æ£€æŸ¥é›†åˆæ˜¯å¦è¢«ä¿®æ”¹ checkForComodification(); int i = cursor; if (i &gt;= size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i &gt;= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[lastRet = i]; &#125; // è°ƒç”¨æ­¤æ–¹æ³•å‰ï¼Œå¿…é¡»è°ƒç”¨ next() æ–¹æ³•, å¦‚æœä¸è°ƒ next() æ–¹æ³•, é‚£ä¹ˆ lastRet == -1,ç¨‹åºä¼šæŠ¥é”™æŠ›å¼‚å¸¸ public void remove() &#123; if (lastRet &lt; 0) throw new IllegalStateException(); checkForComodification(); try &#123; ArrayList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125; @Override @SuppressWarnings(\"unchecked\") public void forEachRemaining(Consumer&lt;? super E&gt; consumer) &#123; Objects.requireNonNull(consumer); final int size = ArrayList.this.size; int i = cursor; if (i &gt;= size) &#123; return; &#125; final Object[] elementData = ArrayList.this.elementData; if (i &gt;= elementData.length) &#123; throw new ConcurrentModificationException(); &#125; while (i != size &amp;&amp; modCount == expectedModCount) &#123; consumer.accept((E) elementData[i++]); &#125; // update once at end of iteration to reduce heap write traffic cursor = i; lastRet = i - 1; checkForComodification(); &#125; final void checkForComodification() &#123; if (modCount != expectedModCount) throw new ConcurrentModificationException(); &#125;&#125;// List æ¥å£çš„æ–¹æ³•å®ç°public ListIterator&lt;E&gt; listIterator() &#123; return new ListItr(0);&#125;// åœ¨æŒ‡å®šä½ç½®å¤„éå†public ListIterator&lt;E&gt; listIterator(int index) &#123; if (index &lt; 0 || index &gt; size) throw new IndexOutOfBoundsException(\"Index: \"+index); return new ListItr(index);&#125;// ç»§æ‰¿ Itr ç±»ï¼ŒåŒæ—¶æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰ç‰¹æ€§private class ListItr extends Itr implements ListIterator&lt;E&gt; &#123; //æŒ‡å®šä½ç½®è¿›è¡Œéå† ListItr(int index) &#123; super(); cursor = index; &#125; //å‘å‰éå†é›†åˆ public boolean hasPrevious() &#123; return cursor != 0; &#125; public int nextIndex() &#123; return cursor; &#125; public int previousIndex() &#123; return cursor - 1; &#125; @SuppressWarnings(\"unchecked\") public E previous() &#123; checkForComodification(); // å‘å‰éå†ï¼Œæ¸¸æ ‡ - 1 int i = cursor - 1; if (i &lt; 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i &gt;= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[lastRet = i]; &#125; // ä¿®æ”¹é›†åˆå…ƒç´  public void set(E e) &#123; if (lastRet &lt; 0) throw new IllegalStateException(); checkForComodification(); try &#123; ArrayList.this.set(lastRet, e); &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125; // æ–°å¢é›†åˆå…ƒç´  public void add(E e) &#123; checkForComodification(); try &#123; int i = cursor; ArrayList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125;&#125; ä¸ºä»€ä¹ˆè¦æœ‰è¿­ä»£å™¨æˆ‘ä»¬å·²ç»æ¸…æ¥šäº† ArrayList é›†åˆçš„å…·ä½“è¿­ä»£å®ç°ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰æƒ³è¿‡ Java ä¸ºä»€ä¹ˆè¦å®ç°è¿­ä»£å™¨çš„æ–¹å¼æ¥éå†é›†åˆå‘¢ï¼Œå…¶ä¸­çš„å¥¥ç§˜å’Œè®¾è®¡ç†å¿µæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥æ¦‚å†µä¸ºï¼š Iterator æ¥å£æä¾›äº†éå†é›†åˆç±»çš„è§„èŒƒã€‚å®ƒæŠŠè®¿é—®é€»è¾‘ä»ä¸åŒç±»å‹çš„é›†åˆç±»ä¸­æŠ½è±¡å‡ºæ¥ï¼Œä»è€Œé¿å…å‘å®¢æˆ·ç«¯æš´éœ²é›†åˆçš„å†…éƒ¨ç»“æ„ï¼ˆæ•°ç»„ã€é“¾è¡¨ç­‰ç»“æ„ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ Iteratorï¼Œéå†ä¸€ä¸ªæ•°ç»„çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç´¢å¼•ï¼š 123for (int i=0; i&lt;array.size(); i++) &#123; // TODO: get(i) ...&#125; è€Œè®¿é—®ä¸€ä¸ªé“¾è¡¨ï¼ˆLinkedListï¼‰åˆå¿…é¡»ä½¿ç”¨ while å¾ªç¯ï¼š 123while ((e=e.next())!=null) &#123; // TODO: e.data() ...&#125; ä»¥ä¸Šä¸¤ç§æ–¹æ³•å®¢æˆ·ç«¯éƒ½å¿…é¡»äº‹å…ˆçŸ¥é“é›†åˆçš„å†…éƒ¨ç»“æ„ï¼Œè®¿é—®ä»£ç å’Œé›†åˆæœ¬èº«æ˜¯ç´§è€¦åˆï¼Œæ— æ³•å°†è®¿é—®é€»è¾‘ä»é›†åˆç±»å’Œå®¢æˆ·ç«¯ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæ¯ä¸€ç§é›†åˆå¯¹åº”ä¸€ç§éå†æ–¹æ³•ï¼Œå®¢æˆ·ç«¯ä»£ç æ— æ³•å¤ç”¨ã€‚æ›´ææ€–çš„æ˜¯ï¼Œå¦‚æœä»¥åéœ€è¦æŠŠ ArrayList æ›´æ¢ä¸º LinkedList ï¼Œåˆ™åŸæ¥çš„å®¢æˆ·ç«¯ä»£ç å¿…é¡»å…¨éƒ¨é‡å†™ã€‚ ä¸ºè§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒIteratoræ¨¡å¼æ€»æ˜¯ç”¨åŒä¸€ç§é€»è¾‘æ¥éå†é›†åˆï¼š 123for (Iterator it = c.iterater(); it.hasNext(); ) &#123; //...&#125; å¥¥ç§˜åœ¨äºå®¢æˆ·ç«¯è‡ªèº«ä¸ç»´æŠ¤éå†é›†åˆçš„â€æŒ‡é’ˆâ€ï¼Œæ‰€æœ‰çš„å†…éƒ¨çŠ¶æ€ï¼ˆå¦‚å½“å‰å…ƒç´ ä½ç½®ï¼Œæ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼‰éƒ½ç”± Iterator æ¥ç»´æŠ¤ï¼Œè€Œè¿™ä¸ª Iterator ç”±é›†åˆç±»é€šè¿‡å·¥å‚æ–¹æ³•ç”Ÿæˆï¼Œå› æ­¤ï¼Œå®ƒçŸ¥é“å¦‚ä½•éå†æ•´ä¸ªé›†åˆã€‚å®¢æˆ·ç«¯ä»ä¸ç›´æ¥å’Œé›†åˆç±»æ‰“äº¤é“ï¼Œå®ƒæ€»æ˜¯æ§åˆ¶ Iterator ï¼Œå‘å®ƒå‘é€â€å‘å‰â€ï¼Œâ€å‘åâ€ï¼Œâ€å–å½“å‰å…ƒç´ â€çš„å‘½ä»¤ï¼Œå°±å¯ä»¥é—´æ¥éå†æ•´ä¸ªé›†åˆã€‚ fail-fast æœºåˆ¶é€šè¿‡é˜…è¯» ArrayList è¿­ä»£å™¨æºç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°é›†åˆåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ–°å¢ã€ä¿®æ”¹æˆ–è€…åˆ é™¤é›†åˆå…ƒç´ æ—¶ï¼Œç¨‹åºæœ‰å¯èƒ½ä¼šæŠ›å‡ºConcurrentModificationException å¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸çš„è®¾ç½®ï¼Œå°±æ˜¯é›†åˆè¿­ä»£ fail-fast æœºåˆ¶ã€‚å¤§å®¶å¯ä»¥åœ¨æ–‡ç« ä¸­æœç´¢ ConcurrentModificationException å‡ºç°çš„åœ°æ–¹ï¼Œç»“åˆé˜…è¯»æºç æ¥äº†è§£ fail-fast æœºåˆ¶å®ç°é€»è¾‘ã€‚fail-fast æœºåˆ¶å…·ä½“å¯ä»¥æ¦‚å†µä¸ºï¼š fail-fast æœºåˆ¶æ˜¯javaé›†åˆ(Collection)ä¸­çš„ä¸€ç§é”™è¯¯æœºåˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿfail-fastäº‹ä»¶ã€‚ fail-fast ç›®çš„ è¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºæ— æ³•å¾—åˆ°ä¿è¯ï¼Œå› ä¸ºä¸€èˆ¬æ¥è¯´ï¼Œä¸å¯èƒ½å¯¹æ˜¯å¦å‡ºç°ä¸åŒæ­¥å¹¶å‘ä¿®æ”¹åšå‡ºä»»ä½•ç¡¬æ€§ä¿è¯ã€‚å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨ä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡º ConcurrentModificationExceptionã€‚å› æ­¤ï¼Œä¸ºæé«˜è¿™ç±»è¿­ä»£å™¨çš„æ­£ç¡®æ€§è€Œç¼–å†™ä¸€ä¸ªä¾èµ–äºæ­¤å¼‚å¸¸çš„ç¨‹åºæ˜¯é”™è¯¯çš„åšæ³•ï¼šè¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºåº”è¯¥ä»…ç”¨äºæ£€æµ‹ bugã€‚ fail-fast åŸå› ArrayList é›†åˆç»´æŠ¤äº†ä¸€ä¸ªå…¨å±€å˜é‡ modCount ï¼Œ åˆå§‹å€¼ä¸º 0ï¼Œ å®ƒæ˜¯é›†åˆ AbstractList æŠ½è±¡ç±»é‡Œçš„ã€‚å½“æˆ‘ä»¬è°ƒç”¨ ArrayList çš„ add ã€ remove ã€ clear æ–¹æ³•ï¼Œ modCount å˜é‡å€¼ä¼šå¢åŠ ï¼Œå¯ä»¥å‘ç° modCount å€¼æ˜¯ç”¨æ¥è®°å½•é›†åˆå‘ç”Ÿä¿®æ”¹çš„æ¬¡æ•°ã€‚é˜…è¯» ArrayList è¿­ä»£å™¨å®ç°ä»£ç ï¼Œæˆ‘ä»¬å‘ç°ç¨‹åºä¸­æœ‰ int expectedModCount = modCount çš„é€»è¾‘ï¼Œå½“æˆ‘ä»¬è¦è¿­ä»£é›†åˆæ—¶ï¼Œåˆ›å»ºçš„è¿­ä»£å™¨çš„ expectedModCount ä¸ modCount å€¼ç›¸åŒï¼Œè€Œå½“ ArrayList å‘ç”Ÿä¿®æ”¹æ—¶ï¼ŒmodCount å€¼å‘ç”Ÿå˜åŒ–ï¼Œè€Œè¿­ä»£å™¨å¹¶æ²¡æœ‰åŒæ­¥åˆ°modCount å€¼çš„å˜åŒ–ï¼Œå½“ç¨‹åºè°ƒç”¨è¿­ä»£å™¨ next æ–¹æ³•ï¼Œä¼šè§¦å‘ç¨‹åºè®¾ç½®çš„ checkForComodification æ–¹æ³•ï¼Œè€Œæ­¤æ—¶ expectedModCount != modCount ,åˆ™æŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚å½“ç„¶ï¼Œè¿­ä»£çš„ç¨‹åºæ£€æŸ¥åˆ°æ•°ç»„è¶Šç•Œå¼‚å¸¸ï¼Œæˆ–è€…å½“ cursor çš„å€¼å¤§äº ArrayList çš„ elementData.length çš„å€¼ï¼Œä¹Ÿä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚ fail-fast æœºåˆ¶å…·ä½“æ¡ˆä¾‹å•çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è°ƒç”¨ ArrayList çš„ remove æ–¹æ³• 12345678910111213141516171819@Testpublic void singleThreadArrayList()&#123; List&lt;Integer&gt; integerList = new ArrayList&lt;Integer&gt;(); integerList.add(1); Iterator&lt;Integer&gt; iterator = integerList.iterator(); while (iterator.hasNext())&#123; Integer integer = iterator.next(); if(integer == 1)&#123; // è°ƒç”¨ ArrayList çš„ remove æ–¹æ³•åï¼ŒexpectedModCount != modCountï¼ŒæŠ›å¼‚å¸¸ // è°ƒç”¨ Iterator çš„ remove æ–¹æ³•ï¼Œåˆ™ç¨‹åºæ‰§è¡Œæ­£å¸¸ integerList.remove(integer); &#125; &#125;&#125; ç¨‹åºè¿è¡ŒåæŠ›å‡ºå¼‚å¸¸ï¼š å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œè°ƒç”¨ Iterator çš„ remove æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556private List&lt;Integer&gt; integerList = new ArrayList&lt;&gt;();@Testpublic void multiThreadArrayList()&#123; for(int i = 0 ; i &lt; 10;i++)&#123; integerList.add(i); &#125; Thread oneThread = new Thread(() -&gt; &#123; Iterator&lt;Integer&gt; iterator = integerList.iterator(); while (iterator.hasNext())&#123; int value = iterator.next(); System.out.println(\"thread one iterator value:\" + value); try &#123; Thread.sleep(1L); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;); Thread twoThread = new Thread(() -&gt;&#123; Iterator&lt;Integer&gt; iterator = integerList.iterator(); while (iterator.hasNext())&#123; int value = iterator.next(); System.out.println(\"thread two iterator value:\" + value); if( value == 8)&#123; System.out.println(\"thread two remove value:\" + value); iterator.remove(); &#125; &#125; &#125;); oneThread.start(); twoThread.start(); try &#123; //ç­‰å¾…çº¿ç¨‹ one æ‰§è¡Œå®Œæˆ oneThread.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;&#125; ç¨‹åºè¿è¡ŒåæŠ›å‡ºå¼‚å¸¸ï¼š å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä¿®æ”¹é›†åˆå…ƒç´ ä¸€å®šè¦è°¨æ…ï¼Œä»¥å…ç¨‹åºå¼‚å¸¸ã€‚ å­é›†æ“ä½œåŠæ³¨æ„äº‹é¡¹æœ‰æ—¶æˆ‘ä»¬å¯èƒ½åªæƒ³å–å¾— List é›†åˆä¸­çš„æŸæ®µè¿ç»­çš„é›†åˆå…ƒç´ ï¼ŒArrayList å’Œ Vector éƒ½æä¾›äº† subList æ–¹æ³•æ¥æˆªå–é›†åˆçš„ä¸€éƒ¨åˆ†æ¥æ–¹ä¾¿æˆ‘ä»¬çš„ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªåŠŸèƒ½å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œä¹Ÿéœ€è¦æ³¨æ„ï¼š subList è¿”å›ä»…ä»…åªæ˜¯é›†åˆå¯¹è±¡ä¸€ä¸ªè§†å›¾ï¼Œæ“ä½œ subList ååŸé›†åˆå¯¹è±¡ä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚ SubList ç±»æ˜¯ ArrayList ç±»é‡Œçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼ŒsubList ä¹Ÿæä¾›äº†æ“ä½œé›†åˆçš„ æ–°å¢ add ï¼Œä¿®æ”¹ set, åˆ é™¤ remove, è·å– get ç­‰æ–¹æ³•ï¼Œè¿˜å®ç°äº†å­é›†åˆè¿­ä»£çš„åŠŸèƒ½ã€‚æˆ‘ä»¬é€šè¿‡æºç çœ‹çœ‹å…¶å†…éƒ¨å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236// ä»å½“å‰ List ä¸­åˆ›å»ºä¸€ä¸ªæŒ‡å®šèµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®çš„ subListpublic List&lt;E&gt; subList(int fromIndex, int toIndex) &#123; // è¾¹ç•Œæ£€æŸ¥ subListRangeCheck(fromIndex, toIndex, size); // this æŒ‡ä»£å½“å‰å¯¹è±¡ï¼Œå¹¶ä¼ åˆ° SubList ä¸­ return new SubList(this, 0, fromIndex, toIndex);&#125;static void subListRangeCheck(int fromIndex, int toIndex, int size) &#123; if (fromIndex &lt; 0) throw new IndexOutOfBoundsException(\"fromIndex = \" + fromIndex); if (toIndex &gt; size) throw new IndexOutOfBoundsException(\"toIndex = \" + toIndex); if (fromIndex &gt; toIndex) throw new IllegalArgumentException(\"fromIndex(\" + fromIndex + \") &gt; toIndex(\" + toIndex + \")\");&#125;private class SubList extends AbstractList&lt;E&gt; implements RandomAccess &#123; private final AbstractList&lt;E&gt; parent; private final int parentOffset; private final int offset; int size; SubList(AbstractList&lt;E&gt; parent, int offset, int fromIndex, int toIndex) &#123; this.parent = parent; this.parentOffset = fromIndex; this.offset = offset + fromIndex; this.size = toIndex - fromIndex; this.modCount = ArrayList.this.modCount; &#125; // ä¿®æ”¹å­é›†åˆä¸­çš„å…ƒç´  public E set(int index, E e) &#123; rangeCheck(index); checkForComodification(); // è·å–åˆ° this å¯¹è±¡çš„ ArrayList ä¸­çš„å…ƒç´  E oldValue = ArrayList.this.elementData(offset + index); // åŒæ—¶ this æŒ‡ä»£çš„ ArrayList é›†åˆä¸­çš„å…ƒç´ ä¹Ÿè¢«ä¿®æ”¹ ArrayList.this.elementData[offset + index] = e; return oldValue; &#125; // è·å–å­é›†åˆä¸­æŒ‡å®šä½ç½®çš„å…ƒç´  public E get(int index) &#123; rangeCheck(index); // æ£€æŸ¥æ˜¯å¦ä¿®æ”¹ï¼Œfail-fast æœºåˆ¶ checkForComodification(); return ArrayList.this.elementData(offset + index); &#125; // å­é›†åˆé•¿åº¦çš„å¤§å° public int size() &#123; checkForComodification(); return this.size; &#125; // åœ¨æŒ‡å®šä½ç½®ä¿®æ”¹é›†åˆå…ƒç´  public void add(int index, E e) &#123; rangeCheckForAdd(index); checkForComodification(); parent.add(parentOffset + index, e); this.modCount = parent.modCount; this.size++; &#125; //åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´  public E remove(int index) &#123; rangeCheck(index); checkForComodification(); E result = parent.remove(parentOffset + index); this.modCount = parent.modCount; this.size--; return result; &#125; // æŒ‰ç…§èŒƒå›´åˆ é™¤å…ƒç´  protected void removeRange(int fromIndex, int toIndex) &#123; checkForComodification(); parent.removeRange(parentOffset + fromIndex, parentOffset + toIndex); this.modCount = parent.modCount; this.size -= toIndex - fromIndex; &#125; // å¢åŠ é›†åˆå…ƒç´  public boolean addAll(Collection&lt;? extends E&gt; c) &#123; return addAll(this.size, c); &#125; // æŒ‡å®šä½ç½®å‡ºå¢åŠ é›†åˆå…ƒç´  public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123; rangeCheckForAdd(index); int cSize = c.size(); if (cSize==0) return false; checkForComodification(); parent.addAll(parentOffset + index, c); this.modCount = parent.modCount; this.size += cSize; return true; &#125; // è¿­ä»£å®ç° public Iterator&lt;E&gt; iterator() &#123; return listIterator(); &#125; public ListIterator&lt;E&gt; listIterator(final int index) &#123; checkForComodification(); rangeCheckForAdd(index); final int offset = this.offset; return new ListIterator&lt;E&gt;() &#123; int cursor = index; int lastRet = -1; int expectedModCount = ArrayList.this.modCount; public boolean hasNext() &#123; return cursor != SubList.this.size; &#125; @SuppressWarnings(\"unchecked\") public E next() &#123; checkForComodification(); int i = cursor; if (i &gt;= SubList.this.size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i &gt;= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[offset + (lastRet = i)]; &#125; public boolean hasPrevious() &#123; return cursor != 0; &#125; @SuppressWarnings(\"unchecked\") public E previous() &#123; checkForComodification(); int i = cursor - 1; if (i &lt; 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i &gt;= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[offset + (lastRet = i)]; &#125; @SuppressWarnings(\"unchecked\") public void forEachRemaining(Consumer&lt;? super E&gt; consumer) &#123; Objects.requireNonNull(consumer); final int size = SubList.this.size; int i = cursor; if (i &gt;= size) &#123; return; &#125; final Object[] elementData = ArrayList.this.elementData; if (offset + i &gt;= elementData.length) &#123; throw new ConcurrentModificationException(); &#125; while (i != size &amp;&amp; modCount == expectedModCount) &#123; consumer.accept((E) elementData[offset + (i++)]); &#125; // update once at end of iteration to reduce heap write traffic lastRet = cursor = i; checkForComodification(); &#125; public int nextIndex() &#123; return cursor; &#125; public int previousIndex() &#123; return cursor - 1; &#125; public void remove() &#123; if (lastRet &lt; 0) throw new IllegalStateException(); checkForComodification(); try &#123; SubList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = ArrayList.this.modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125; public void set(E e) &#123; if (lastRet &lt; 0) throw new IllegalStateException(); checkForComodification(); try &#123; ArrayList.this.set(offset + lastRet, e); &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125; public void add(E e) &#123; checkForComodification(); try &#123; int i = cursor; SubList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = ArrayList.this.modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125; final void checkForComodification() &#123; if (expectedModCount != ArrayList.this.modCount) throw new ConcurrentModificationException(); &#125; &#125;; &#125; public List&lt;E&gt; subList(int fromIndex, int toIndex) &#123; subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, offset, fromIndex, toIndex); &#125;&#125; æ€»ç»“ ArrayList å’Œ Vector æ˜¯ä¸€ä¸ªå¯æ‰©å±•ï¼Œæœ‰åº ï¼Œå¯ä»¥è¿­ä»£çš„é›†åˆç±»å®ç° åˆ›å»ºé›†åˆçš„æ—¶å€™ï¼Œå¦‚æœé¢„å…ˆçŸ¥é“é›†åˆçš„å¤§å°ï¼Œå¯ä»¥åˆ›å»ºå…·ä½“å¤§å°çš„é›†åˆï¼Œè¿™æ ·å¯ä»¥é¿å…é›†åˆä¸æ–­æ‰©å±•è€Œé€ æˆçš„æ€§èƒ½å½±å“ fail-fast æœºåˆ¶æ˜¯ä¸ºäº†é¢„é˜²å¹¶å‘ä¿®æ”¹é›†åˆå…ƒç´ ï¼Œè€Œé€ æˆçš„è¿­ä»£é›†åˆå…ƒç´ ä¸ä¸€è‡´çš„é—®é¢˜ã€‚è‡ªè¡Œç¼–ç¨‹ä¸èƒ½ä¾èµ–äºè¿™ç§æœºåˆ¶ï¼Œåªèƒ½ç”¨äºæ£€æµ‹ bug subList è¿”å›ä»…ä»…åªæ˜¯é›†åˆå¯¹è±¡ä¸€ä¸ªè§†å›¾ï¼Œæ“ä½œ subList ååŸé›†åˆå¯¹è±¡ä¹Ÿä¼šè¢«ä¿®æ”¹ å‚è€ƒæ–‡ç«  When to use LinkedList over ArrayList?Javaæé«˜ç¯‡ï¼ˆä¸‰å››ï¼‰â€”â€“fail-fastæœºåˆ¶Javaä¸­çš„fail-fastæœºåˆ¶subListçš„ç¼ºé™·Java: split a List into two sub-Lists?","categories":[{"name":"Technology","slug":"Technology","permalink":"https://blog.51itzone.cn/categories/Technology/"},{"name":"Java","slug":"Technology/Java","permalink":"https://blog.51itzone.cn/categories/Technology/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://blog.51itzone.cn/tags/Java/"}]},{"title":"Ubuntu ä¸‹å®‰è£… Oracle JDK çš„ä¸¤ç§æ–¹æ³•","slug":"ubuntu-install-java-two-method","date":"2016-02-13T12:50:25.000Z","updated":"2018-08-20T02:11:16.649Z","comments":true,"path":"2016/02/13/ubuntu-install-java-two-method/","link":"","permalink":"https://blog.51itzone.cn/2016/02/13/ubuntu-install-java-two-method/","excerpt":"æ€»ç»“ ubuntu ç³»ç»Ÿä¸‹å®‰è£… Oracle JDK çš„æ–¹æ³•ï¼Œæ–¹ä¾¿å¤§å®¶ï¼Œä»¥åŠå¤‡ä»¥åä½¿ç”¨ã€‚","text":"æ€»ç»“ ubuntu ç³»ç»Ÿä¸‹å®‰è£… Oracle JDK çš„æ–¹æ³•ï¼Œæ–¹ä¾¿å¤§å®¶ï¼Œä»¥åŠå¤‡ä»¥åä½¿ç”¨ã€‚ å†™åœ¨å‰é¢ æ·»åŠ ppa(æº)ï¼Œå¹¶ä¸‹è½½å®‰è£… jdk é€šè¿‡oracleå®˜ç½‘ä¸‹è½½å‹ç¼©åŒ…å®‰è£… ä¸€ã€é€šè¿‡ ppa å®‰è£… jdk1. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š123sudo apt install software-properties-commonsudo add-apt-repository ppa:webupd8team/javasudo apt-get update 2. æ‰§è¡Œå®‰è£… jdk çš„å‘½ä»¤ï¼š1sudo apt-get install oracle-java8-installer å®‰è£…è¿‡ç¨‹ï¼Œå®‰è£…å™¨ä¼šæç¤ºä½ åŒæ„ oracle çš„æœåŠ¡æ¡æ¬¾,é€‰æ‹© ok ç„¶åé€‰æ‹© yes å³å¯ã€‚å½“ç„¶ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ï¼Œé»˜è®¤æ‰§è¡ŒåŒæ„é€‰æ‹© 1echo oracle-java8-installer shared/accepted-oracle-license-v1-1selecttrue | sudo /usr/bin/debconf-set-selections å¦‚æœåœ¨è¿‡ç¨‹ä¸­ï¼Œç½‘é€Ÿè¾ƒæ…¢æˆ–è€…å®‰è£…ä¸­æ–­ï¼Œæˆ‘ä»¬å¯ä»¥å»å®˜ç½‘ä¸‹è½½ jdk çš„å‹ç¼©åŒ…ï¼Œæ”¾åˆ°/var/cache/oracle-jdk8-installerç›®å½•ä¸‹ï¼Œç„¶ååœ¨æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå®‰è£…å™¨åˆ™ä¼šé»˜è®¤ä½¿ç”¨æˆ‘ä»¬ä¸‹è½½çš„ jdk ç‰ˆæœ¬è¿›è¡Œå®‰è£…ã€‚ 3. è®¾ç½®é»˜è®¤ jdk12345jdk7sudo update-java-alternatives -s java-7-oraclejdk8sudo update-java-alternatives -s java-8-oracle 4. æµ‹è¯•å®‰è£…123java -versionjavac -version äºŒã€é€šè¿‡å®˜ç½‘ä¸‹ jdk å‹ç¼©åŒ…å®‰è£…1. å®˜ç½‘ä¸‹è½½ jdk å‹ç¼©åŒ…shellä¸‹è½½åœ°å€ï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.htmlï¼Œé€‰æ‹©ç›¸åº”ç‰ˆæœ¬çš„ jdk ï¼Œå¹¶ä¸‹è½½å‹ç¼©åŒ…ã€‚ 2. åˆ›å»ºç›®å½•å¹¶è§£å‹ç¼© jdkåˆ›å»ºç›®å½•ï¼š 1sudo mkdir /usr/lib/jvm è§£å‹ç¼©åˆ°åˆ›å»ºçš„ç›®å½• 1sudo tar -zxvf jdk-8u66-linux-x64.tar.gz -C /usr/lib/jvm 3. å¢åŠ  jdk ç¯å¢ƒå˜é‡ä¿®æ”¹linuxç¯å¢ƒå˜é‡æ–‡ä»¶ 1sudo vim /etc/profile 12345#set oracle jdk environmentexport JAVA_HOME=\"/usr/lib/jvm/jdk1.8.0_66\"export PATH=\"$PATH:$JAVA_HOME/bin\"export JRE_HOME=\"$JAVA_HOME/jre\"export CLASSPATH=\".:$JAVA_HOME/lib:$JRE_HOME/lib\" 4.ä½¿ç¯å¢ƒå˜é‡ç«‹å³ç”Ÿæ•ˆ1source /etc/profile 5. è®¾ç½®ç³»ç»Ÿé»˜è®¤ jdkå› ä¸ºè®¸å¤š linux é»˜è®¤å®‰è£…æœ‰ openjdk ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè®¾ç½®é»˜è®¤ jdk 12345sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.8.0_66/bin/java 300 sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk1.8.0_66/bin/javac 300 sudo update-alternatives --install /usr/bin/jar jar /usr/lib/jvm/jdk1.8.0_66/bin/jar 300 sudo update-alternatives --install /usr/bin/javah javah /usr/lib/jvm/jdk1.8.0_66/bin/javah 300 sudo update-alternatives --install /usr/bin/javap javap /usr/lib/jvm/jdk1.8.0_66/bin/javap 300 è¿™é‡Œçš„300åªæ˜¯æ ‡è¯†ä¸€ä¸‹ï¼Œæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œåªæ˜¯ä¸‹ä¸€æ­¥è¦ç”¨åˆ°ç„¶åæ‰§è¡Œå‘½ä»¤ï¼š 1sudo update-alternatives --config java è‹¥æ˜¯åˆæ¬¡å®‰è£… jdk, ä¼šæœ‰ä¸‹é¢çš„æç¤ºThere is only one alternative in link group java (providing /usr/bin/java)å¦è€… , ä¼šåˆ—å‡ºç³»ç»Ÿä¸Šçš„æ‰€æœ‰å·²å®‰è£…çš„ javaï¼Œç„¶åè‡ªå·±é€‰æ‹©ï¼Œå³é€‰æœ€åä¸º300çš„é‚£ä¸ª 6. æµ‹è¯• jdk æ˜¯å¦å®‰è£…æˆåŠŸ123java -versionjavac -version å¦å¤–åˆ é™¤é€šè¿‡ ppa å®‰è£…çš„ jdk 1sudo apt-get remove oracle-java8-installer å¥½ï¼Œä»¥ä¸Šå°±å®‰è£… jdk çš„ä¸¤ç§æ–¹æ³•ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©","categories":[{"name":"Technology","slug":"Technology","permalink":"https://blog.51itzone.cn/categories/Technology/"},{"name":"Java","slug":"Technology/Java","permalink":"https://blog.51itzone.cn/categories/Technology/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://blog.51itzone.cn/tags/Java/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://blog.51itzone.cn/tags/Ubuntu/"}]},{"title":"è®°å½•æˆä¸ºæ›´å¥½çš„è‡ªå·±","slug":"record-to-be-better","date":"2016-02-10T12:46:25.000Z","updated":"2018-08-20T02:11:16.649Z","comments":true,"path":"2016/02/10/record-to-be-better/","link":"","permalink":"https://blog.51itzone.cn/2016/02/10/record-to-be-better/","excerpt":"ä¸‡äº‹å¼€å¤´éš¾ï¼Œä¸ç®¡åšä»€ä¹ˆæœ€éš¾çš„å°±æ˜¯ä»é›¶åˆ°ä¸€çš„è¿‡ç¨‹ã€‚ä¸€ç›´ä»¥æ¥éƒ½æƒ³æ­å»ºè‡ªå·±çš„åšå®¢æ¥è®°å½•è‡ªå·±çš„æ‰€æ€ã€æ‰€æƒ³ã€æ‰€æ„Ÿã€‚å†™åšå®¢åœ¨äºåšæŒï¼ŒåšæŒä¸‹æ¥è®°å½•è‡ªå·±çš„ç”Ÿæ´»å’Œæƒ³æ³•ï¼Œç•™ä¸‹ä¸€äº›è®°å¿†ã€‚","text":"ä¸‡äº‹å¼€å¤´éš¾ï¼Œä¸ç®¡åšä»€ä¹ˆæœ€éš¾çš„å°±æ˜¯ä»é›¶åˆ°ä¸€çš„è¿‡ç¨‹ã€‚ä¸€ç›´ä»¥æ¥éƒ½æƒ³æ­å»ºè‡ªå·±çš„åšå®¢æ¥è®°å½•è‡ªå·±çš„æ‰€æ€ã€æ‰€æƒ³ã€æ‰€æ„Ÿã€‚å†™åšå®¢åœ¨äºåšæŒï¼ŒåšæŒä¸‹æ¥è®°å½•è‡ªå·±çš„ç”Ÿæ´»å’Œæƒ³æ³•ï¼Œç•™ä¸‹ä¸€äº›è®°å¿†ã€‚ å†™åšå®¢çš„å¥½å¤„ å¦‚ä½•æ‰èƒ½åšæŒå†™åšå®¢ ä¸€.å†™åšå®¢çš„å¥½å¤„1ã€å­¦ä¹ å†™blogçš„æŠ€å·§æ²¡æœ‰äººå¤©ç”Ÿä¼šå†™blogï¼Œä¸æ–­å°è¯•ï¼Œæ€è€ƒæ‰€å†™çš„å†…å®¹ï¼Œæ‰ä¼šç»ƒå°±å†™å‡ºå¤§å®¶å–œæ¬¢çš„åšæ–‡ã€‚ 2ã€ç¼–å†™è¯»ä¹¦ç¬”è®°ä¹¦è¯»äº†å¾ˆå¤šï¼Œå‘ç°è‡ªå·±æ²¡æœ‰æ”¶è·ï¼Œç”¨è¯»ä¹¦ç¬”è®°æ¥æ€»ç»“å¿ƒå¾—æ˜¯ä¸ªå¾ˆä¸é”™çš„åšæ³•ã€‚ 3ã€åˆ¶å®šå­¦ä¹ è®¡åˆ’ å­¦ä¹ è¿‡çš„çŸ¥è¯†éœ€è¦æ€»ç»“ï¼Œç»å¸¸å¤ä¹ å›é¡¾ï¼Œä¸ç„¶æ—¶é—´ä¹…äº†å°±ä¼šé—å¿˜ã€‚æŠŠæ‰€å­¦ä¹ çš„çŸ¥è¯†åˆ†äº«å‡ºæ¥ï¼Œä¸å¤§å®¶äº¤æµå­¦ä¹ ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿè¦å®šæœŸå›é¡¾æ€»ç»“ï¼Œæ¸©æ•…çŸ¥æ–°ä¹ˆã€‚ 4ã€å¯ä»¥æˆå°±å’Œäº†è§£è‡ªæˆ‘æ–‡ç« å†™çš„å¤šäº†ï¼Œå°±ä¼šå‘ç°è‡ªå·±ä»€ä¹ˆåœ°æ–¹å¯ä»¥æƒ³æ¸…æ¥šï¼Œä»€ä¹ˆåœ°æ–¹éœ€è¦æ”¹è¿›å’Œå®Œå–„ï¼Œå†™ç€å†™ç€å°±ä¼šå¯¹è‡ªå·±è®¤è¯†çš„æ›´æ¸…æ™°ï¼Œä½ æœ€ç»ˆä¼šæ˜ç™½è‡ªå·±æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„äººï¼Œå’Œè‡ªå·±æ‰€æ„Ÿå…´è¶£çš„æ˜¯ä»€ä¹ˆã€‚ äºŒã€å¦‚ä½•æ‰èƒ½åšæŒå†™åšå®¢1ã€åšæŒï¼Œæ˜¯ä¸€ç§ä¼˜ç§€ä¹ æƒ¯åšæŒå†™åšå®¢éœ€è¦åšçš„ä»¥ä¸‹å››ç‚¹ï¼šå®è·µã€åæ€ã€æ€»ç»“ã€åšæŒã€‚ä¸æ–­çš„å»åœ¨å®è·µä¸­æ€»ç»“åæ€ã€ä¼˜åŒ–ã€åšæŒï¼Œæ‰èƒ½çœŸæ­£å­¦ä¹ åˆ°ç²¾é«“ã€‚ 2ã€æ—¶æ—¶åˆ»åˆ»çš„éƒ½è¦å‡†å¤‡å¥½å¼€å§‹å†™ä½œå–„äºåˆ©ç”¨èº«è¾¹çš„å·¥å…·ï¼Œæ¯”å¦‚Evernoteã€æœ‰é“äº‘ç¬”è®°ã€‚å½“æˆ‘ä»¬æœ‰å†™ä½œçš„æƒ³æ³•ï¼Œä½†æ˜¯æ—¶é—´ä¸å…è®¸ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å·¥å…·é‡Œå…ˆæ‹Ÿå¥½è¦å†™çš„æçº²å’Œæ€è€ƒåæ€»ç»“å‡ºçš„å†…å®¹ã€‚ 3ã€æ”¶é›†å†™ä½œå†…å®¹ï¼Œå¹¶è½¬åŒ–ä¸ºè‡ªå·±çš„æ–‡ç« æ¨èå¤§å®¶ä½¿ç”¨[ç¨åé˜…è¯»]åŠŸèƒ½ï¼Œæ¯”å¦‚çŸ¥åçš„Pocket,æ”¯æŒå¤šç»ˆç«¯åŒæ­¥ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æŠŠè‡ªå·±æƒ³å†™çš„å†…å®¹æ”¶é›†èµ·æ¥ï¼Œç­‰æœ‰ç©ºäº†è¿›è¡Œæ¶ˆåŒ–ã€æ€»ç»“å’Œå†™ä½œã€‚ 4ã€åšæŒå†™ä½œï¼Œå®Œæˆè‡ªæˆ‘çš„è¥é”€ç°åœ¨æ˜¯è‡ªåª’ä½“çš„å¤©ä¸‹ï¼Œåœ¨è¿™å‘è¾¾çš„äº’è”ç½‘æµªæ½®é‡Œï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¼šè¥é”€è‡ªå·±ï¼Œå±•ç¤ºè‡ªå·±æ‰åï¼Œä¸ºè‡ªå·±åˆ›é€ ä»·å€¼ä¹Ÿä¸ºä»–äººåˆ›å»ºä»·å€¼ï¼Œå®ç°å…±èµ¢ã€‚ ä¸‰ã€æ€»ç»“å†™åšå®¢åœ¨äºåšæŒï¼Œä¸‰åˆ†çƒ­åº¦æˆå°±ä¸äº†è‡ªå·±ï¼Œä¹Ÿä¸èƒ½ç»™åˆ«äººå¸¦æ¥å¸®åŠ©å’Œä»·å€¼ã€‚åˆ¶å®šå‡ºæ˜ç¡®çš„è®¡åˆ’ï¼ŒæŠŠè‡ªå·±çš„æ‰€å­¦è½¬æ¢æˆçŸ¥è¯†ä¼ é€’å‡ºå»ã€‚è®°å½•ï¼Œæˆä¸ºæ›´å¥½çš„è‡ªå·±ã€‚ åˆ˜æœªé¹è¯´â€”â€”å†™åšå®¢è¿™ä»¶äº‹æƒ…ç»™æˆ‘æœ€å¤§çš„ä½“ä¼šå°±æ˜¯ï¼Œä¸€ä»¶äº‹æƒ…å¦‚æœä½ èƒ½å¤ŸåšæŒåš8å¹´ï¼Œé‚£ä¹ˆä¸ç®¡æ•ˆç‡å’Œé¢‘ç‡å¤šä½ï¼Œæœ€ç»ˆæ€»èƒ½å–å¾—ä¸€äº›å¾ˆå¯è§‚çš„æ”¶ç›Šã€‚è€Œå¦ä¸€ä¸ªä½“ä¼šå°±æ˜¯ï¼Œä¸€ä»¶äº‹æƒ…åªè¦ä½ åšæŒå¾—è¶³å¤Ÿä¹…ï¼Œâ€œåšæŒâ€å°±ä¼šæ…¢æ…¢å˜æˆâ€œä¹ æƒ¯â€ã€‚åŸæœ¬éœ€è¦è´¹åŠ›å»é©±åŠ¨çš„äº‹æƒ…ä¾¿æˆäº†å®¶å¸¸ä¾¿é¥­ï¼Œäº‘æ·¡é£è½»ã€‚","categories":[{"name":"LifeStyle","slug":"LifeStyle","permalink":"https://blog.51itzone.cn/categories/LifeStyle/"}],"tags":[{"name":"LifeStyle","slug":"LifeStyle","permalink":"https://blog.51itzone.cn/tags/LifeStyle/"}]}]}